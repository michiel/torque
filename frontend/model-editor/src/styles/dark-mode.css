/* Dark mode specific styles */

/* Global background for dark mode */
[data-mantine-color-scheme="dark"] {
  color-scheme: dark;
}

/* Ensure scrollbars look good in dark mode */
[data-mantine-color-scheme="dark"] ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

[data-mantine-color-scheme="dark"] ::-webkit-scrollbar-track {
  background: var(--mantine-color-dark-6);
}

[data-mantine-color-scheme="dark"] ::-webkit-scrollbar-thumb {
  background: var(--mantine-color-dark-4);
  border-radius: 4px;
}

[data-mantine-color-scheme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: var(--mantine-color-dark-3);
}

/* Firefox scrollbars */
[data-mantine-color-scheme="dark"] * {
  scrollbar-width: thin;
  scrollbar-color: var(--mantine-color-dark-4) var(--mantine-color-dark-6);
}

/* Selection colors */
[data-mantine-color-scheme="dark"] ::selection {
  background: var(--mantine-color-blue-9);
  color: var(--mantine-color-blue-0);
}

/* Code blocks and pre elements */
[data-mantine-color-scheme="dark"] pre,
[data-mantine-color-scheme="dark"] code {
  background: var(--mantine-color-dark-8);
  border: 1px solid var(--mantine-color-dark-5);
}

/* Form inputs dark mode improvements */
[data-mantine-color-scheme="dark"] .mantine-Input-input {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .mantine-Input-input:focus {
  border-color: var(--mantine-color-blue-4);
}

[data-mantine-color-scheme="dark"] .mantine-Input-input::placeholder {
  color: var(--mantine-color-dark-2);
}

/* Dropdowns and popovers */
[data-mantine-color-scheme="dark"] .mantine-Popover-dropdown,
[data-mantine-color-scheme="dark"] .mantine-Select-dropdown,
[data-mantine-color-scheme="dark"] .mantine-Menu-dropdown {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

/* Table improvements */
[data-mantine-color-scheme="dark"] .mantine-Table-table {
  background-color: var(--mantine-color-dark-7);
}

[data-mantine-color-scheme="dark"] .mantine-Table-table thead tr th {
  background-color: var(--mantine-color-dark-6);
  border-bottom-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Table-table tbody tr td {
  border-bottom-color: var(--mantine-color-dark-5);
}

[data-mantine-color-scheme="dark"] .mantine-Table-table tbody tr:hover {
  background-color: var(--mantine-color-dark-6);
}

/* Notification improvements */
[data-mantine-color-scheme="dark"] .mantine-Notification-root {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

/* ReactFlow / ERD Editor dark mode */
[data-mantine-color-scheme="dark"] .visual-erd-editor {
  background: var(--mantine-color-dark-7);
}

[data-mantine-color-scheme="dark"] .visual-erd-editor-header {
  background: var(--mantine-color-dark-6);
  border-bottom-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .visual-erd-editor-canvas {
  background: var(--mantine-color-dark-7);
}

[data-mantine-color-scheme="dark"] .react-flow__background {
  background: var(--mantine-color-dark-7);
}

[data-mantine-color-scheme="dark"] .react-flow__controls {
  background: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .react-flow__controls button {
  background: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .react-flow__controls button:hover {
  background: var(--mantine-color-dark-5);
}

[data-mantine-color-scheme="dark"] .react-flow__minimap {
  background: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .react-flow__panel {
  background: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
  color: var(--mantine-color-dark-0);
}

/* ReactFlow node dark mode */
[data-mantine-color-scheme="dark"] .react-flow__node {
  background: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
  color: var(--mantine-color-dark-0);
}

/* ReactFlow edge dark mode */
[data-mantine-color-scheme="dark"] .react-flow__edge-path {
  stroke: var(--mantine-color-blue-4);
}

[data-mantine-color-scheme="dark"] .react-flow__edge-path:hover {
  stroke: var(--mantine-color-blue-3);
}

[data-mantine-color-scheme="dark"] .react-flow__edge-text {
  fill: var(--mantine-color-blue-3);
}

/* Paper and Card improvements */
[data-mantine-color-scheme="dark"] .mantine-Paper-root {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Card-root {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

/* Text and headers */
[data-mantine-color-scheme="dark"] .mantine-Title-root {
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .mantine-Text-root {
  color: var(--mantine-color-dark-0);
}

/* Buttons improvements */
[data-mantine-color-scheme="dark"] .mantine-Button-root {
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Button-root[data-variant="subtle"] {
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .mantine-Button-root[data-variant="subtle"]:hover {
  background-color: var(--mantine-color-dark-5);
}

/* ActionIcon improvements */
[data-mantine-color-scheme="dark"] .mantine-ActionIcon-root[data-variant="subtle"] {
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .mantine-ActionIcon-root[data-variant="subtle"]:hover {
  background-color: var(--mantine-color-dark-5);
}

/* Badge improvements */
[data-mantine-color-scheme="dark"] .mantine-Badge-root {
  background-color: var(--mantine-color-dark-5);
  color: var(--mantine-color-dark-0);
}

/* Accordion improvements */
[data-mantine-color-scheme="dark"] .mantine-Accordion-root {
  background-color: var(--mantine-color-dark-6);
}

[data-mantine-color-scheme="dark"] .mantine-Accordion-item {
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Accordion-control {
  background-color: var(--mantine-color-dark-6);
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .mantine-Accordion-control:hover {
  background-color: var(--mantine-color-dark-5);
}

[data-mantine-color-scheme="dark"] .mantine-Accordion-panel {
  background-color: var(--mantine-color-dark-7);
}

/* Tabs improvements */
[data-mantine-color-scheme="dark"] .mantine-Tabs-root {
  background-color: var(--mantine-color-dark-6);
}

[data-mantine-color-scheme="dark"] .mantine-Tabs-list {
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Tabs-tab {
  color: var(--mantine-color-dark-0);
  border-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .mantine-Tabs-tab:hover {
  background-color: var(--mantine-color-dark-5);
}

[data-mantine-color-scheme="dark"] .mantine-Tabs-panel {
  background-color: var(--mantine-color-dark-7);
}

/* Loader improvements */
[data-mantine-color-scheme="dark"] .mantine-Loader-root {
  color: var(--mantine-color-blue-4);
}

/* Generic container improvements */
[data-mantine-color-scheme="dark"] .mantine-Container-root,
[data-mantine-color-scheme="dark"] .mantine-Stack-root,
[data-mantine-color-scheme="dark"] .mantine-Group-root {
  color: var(--mantine-color-dark-0);
}

/* AppShell improvements */
[data-mantine-color-scheme="dark"] .mantine-AppShell-main {
  background-color: var(--mantine-color-dark-7);
}

/* General improvements for components with white backgrounds */
[data-mantine-color-scheme="dark"] *[style*="background: white"],
[data-mantine-color-scheme="dark"] *[style*="background-color: white"] {
  background: var(--mantine-color-dark-6) !important;
  background-color: var(--mantine-color-dark-6) !important;
}

/* Visual Layout Editor dark mode */
[data-mantine-color-scheme="dark"] .visual-layout-editor-header {
  background-color: var(--mantine-color-dark-6);
  border-bottom-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .visual-layout-editor-title {
  background-color: var(--mantine-color-dark-6);
  border-bottom-color: var(--mantine-color-dark-4);
}

[data-mantine-color-scheme="dark"] .visual-layout-editor [data-puck-canvas] {
  background-color: var(--mantine-color-dark-7);
}

/* Entity Node dark mode - override inline styles */
[data-mantine-color-scheme="dark"] .react-flow__node .mantine-Paper-root {
  background-color: var(--mantine-color-dark-6) !important;
  border-color: var(--mantine-color-dark-4) !important;
  color: var(--mantine-color-dark-0);
}

[data-mantine-color-scheme="dark"] .react-flow__node.selected .mantine-Paper-root {
  border-color: var(--mantine-color-blue-4) !important;
}

/* ReactFlow handle dark mode */
[data-mantine-color-scheme="dark"] .react-flow__handle {
  background: var(--mantine-color-dark-4) !important;
  border-color: var(--mantine-color-dark-0) !important;
}

/* Console dark mode */
[data-mantine-color-scheme="dark"] .xterm {
  background-color: var(--mantine-color-dark-8) !important;
}

[data-mantine-color-scheme="dark"] .xterm-screen {
  background-color: var(--mantine-color-dark-8) !important;
}

/* Alert improvements */
[data-mantine-color-scheme="dark"] .mantine-Alert-root {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
}

/* JSON Input improvements */
[data-mantine-color-scheme="dark"] .mantine-JsonInput-input {
  background-color: var(--mantine-color-dark-6);
  border-color: var(--mantine-color-dark-4);
  color: var(--mantine-color-dark-0);
}

/* Tooltip improvements */
[data-mantine-color-scheme="dark"] .mantine-Tooltip-tooltip {
  background-color: var(--mantine-color-dark-5);
  color: var(--mantine-color-dark-0);
}

/* Code/Pre element improvements */
[data-mantine-color-scheme="dark"] .mantine-Code-root {
  background-color: var(--mantine-color-dark-8);
  color: var(--mantine-color-dark-0);
}

/* Divider improvements */
[data-mantine-color-scheme="dark"] .mantine-Divider-root {
  border-color: var(--mantine-color-dark-4);
}

/* Checkbox and Radio improvements */
[data-mantine-color-scheme="dark"] .mantine-Checkbox-root,
[data-mantine-color-scheme="dark"] .mantine-Radio-root {
  color: var(--mantine-color-dark-0);
}

/* Switch improvements */
[data-mantine-color-scheme="dark"] .mantine-Switch-root {
  color: var(--mantine-color-dark-0);
}

/* Spotlight/Command palette improvements */
[data-mantine-color-scheme="dark"] .mantine-Spotlight-root {
  background-color: var(--mantine-color-dark-6);
}

/* General text color fix for all components */
[data-mantine-color-scheme="dark"] * {
  color: inherit;
}

/* Fix for hardcoded colors in inline styles */
[data-mantine-color-scheme="dark"] *[style*="background-color: #fff"],
[data-mantine-color-scheme="dark"] *[style*="backgroundColor: '#fff'"] {
  background-color: var(--mantine-color-dark-6) !important;
}

[data-mantine-color-scheme="dark"] *[style*="color: #868e96"] {
  color: var(--mantine-color-dark-2) !important;
}

/* Body background for dark mode */
[data-mantine-color-scheme="dark"] body {
  background-color: var(--mantine-color-dark-7);
  color: var(--mantine-color-dark-0);
}

/* Root element background */
[data-mantine-color-scheme="dark"] #root {
  background-color: var(--mantine-color-dark-7);
  color: var(--mantine-color-dark-0);
}