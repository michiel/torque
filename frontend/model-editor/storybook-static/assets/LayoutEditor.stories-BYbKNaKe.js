import{j as t}from"./jsx-runtime-CDt2p4po.js";import{K as G,c as He,g as Ke,a as Oe,s as We,u as Qe,b as Ye,d as Je,e as Xe,f as ae,D as Ie,h as Ze,C as et,i as tt,j as rt,P as ot}from"./ComponentPalette-DdSrXGGH.js";import{r as C,R as Y}from"./index-GiUgBvb1.js";import{C as V}from"./Card-Cdu5HIUj.js";import{c as st,G as N,T as $}from"./Text-DRIe2lk6.js";import{S as _}from"./Stack-BdVTzV5n.js";import{B as U}from"./Badge-DlnNQPvo.js";import{T as nt}from"./Tooltip-BGSxJkNY.js";import{A as B}from"./IconX-DFCRbXwC.js";import{I as at}from"./IconSettings-D4Y479Cq.js";import{f as X,u as Z,a as qe,B as D,b as $e,i as it,m as Ee,x as Ne,y as A,I as Ge,z as Pe,o as lt,e as ie,c as dt}from"./createReactComponent-DeW0SWsj.js";import{I as ct}from"./IconEdit-Czy5EC8b.js";import{I as ut}from"./IconTrash-eEDGOZ4_.js";import{C as mt}from"./ConfigurationPanel-LJG9ubju.js";import{v as le}from"./v4-CtRu48qb.js";import{P as de}from"./Paper-C74rEzGU.js";import{I as pt}from"./IconArrowLeft-DnVzGyBP.js";import{B as ce}from"./Button-DxGj0eyG.js";import{A as ft}from"./Tabs-DIZ0DkZF.js";import{p as ue,M as yt}from"./MantineProvider-QIY2Z6QD.js";import"./index-CROobee-.js";import"./TextInput-CTL6muRQ.js";import"./InputBase-qatfRSiM.js";import"./floating-ui.react-CpMue5oT.js";import"./UnstyledButton-93KfNP2S.js";import"./IconSearch-DP7S6QkN.js";import"./IconTable-B3Vt8rKG.js";import"./use-floating-auto-update-T6hkbBTP.js";import"./Transition-CgjnMQvV.js";import"./FocusTrap-D951crCF.js";import"./Select-ONZWQqDe.js";import"./IconDatabase-BwcsqcPj.js";function gt(e,r){return e in r?ue(r[e]):ue(e)}function ze(e,r){const s=e.map(n=>({value:n,px:gt(n,r)}));return s.sort((n,a)=>n.px-a.px),s}function k(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}var De={root:"m_7485cace"};const ht={},vt=$e((e,{size:r,fluid:s})=>({root:{"--container-size":s?void 0:it(r,"container-size")}})),ee=X((e,r)=>{const s=Z("Container",ht,e),{classNames:n,className:a,style:o,styles:d,unstyled:f,vars:l,fluid:m,mod:i,...c}=s,y=qe({name:"Container",classes:De,props:s,className:a,style:o,classNames:n,styles:d,unstyled:f,vars:l,varsResolver:vt});return t.jsx(D,{ref:r,mod:[{fluid:m},i],...y("root"),...c})});ee.classes=De;ee.displayName="@mantine/core/Container";const[me,Le]=st("Grid component was not found in tree"),J=(e,r)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(r/e)}%`:void 0,pe=(e,r,s)=>s||e==="auto"?"100%":e==="content"?"unset":J(e,r),fe=(e,r)=>{if(e)return e==="auto"||r?"1":"auto"},ye=(e,r)=>e===0?"0":e?`${100/(r/e)}%`:void 0;function xt({span:e,order:r,offset:s,selector:n}){var S;const a=Ee(),o=Le(),d=o.breakpoints||a.breakpoints,l=k(e)===void 0?12:k(e),m=Ne({"--col-order":(S=k(r))==null?void 0:S.toString(),"--col-flex-grow":fe(l,o.grow),"--col-flex-basis":J(l,o.columns),"--col-width":l==="content"?"auto":void 0,"--col-max-width":pe(l,o.columns,o.grow),"--col-offset":ye(k(s),o.columns)}),i=A(d).reduce((p,u)=>{var v;return p[u]||(p[u]={}),typeof r=="object"&&r[u]!==void 0&&(p[u]["--col-order"]=(v=r[u])==null?void 0:v.toString()),typeof e=="object"&&e[u]!==void 0&&(p[u]["--col-flex-grow"]=fe(e[u],o.grow),p[u]["--col-flex-basis"]=J(e[u],o.columns),p[u]["--col-width"]=e[u]==="content"?"auto":void 0,p[u]["--col-max-width"]=pe(e[u],o.columns,o.grow)),typeof s=="object"&&s[u]!==void 0&&(p[u]["--col-offset"]=ye(s[u],o.columns)),p},{}),y=ze(A(i),d).filter(p=>A(i[p.value]).length>0).map(p=>({query:o.type==="container"?`mantine-grid (min-width: ${d[p.value]})`:`(min-width: ${d[p.value]})`,styles:i[p.value]}));return t.jsx(Ge,{styles:m,media:o.type==="container"?void 0:y,container:o.type==="container"?y:void 0,selector:n})}var te={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const wt={span:12},re=X((e,r)=>{const s=Z("GridCol",wt,e),{classNames:n,className:a,style:o,styles:d,vars:f,span:l,order:m,offset:i,...c}=s,y=Le(),S=Pe();return t.jsxs(t.Fragment,{children:[t.jsx(xt,{selector:`.${S}`,span:l,order:m,offset:i}),t.jsx(D,{ref:r,...y.getStyles("col",{className:lt(a,S),style:o,classNames:n,styles:d}),...c})]})});re.classes=te;re.displayName="@mantine/core/GridCol";function ge({gutter:e,selector:r,breakpoints:s,type:n}){const a=Ee(),o=s||a.breakpoints,d=Ne({"--grid-gutter":ie(k(e))}),f=A(o).reduce((i,c)=>(i[c]||(i[c]={}),typeof e=="object"&&e[c]!==void 0&&(i[c]["--grid-gutter"]=ie(e[c])),i),{}),m=ze(A(f),o).filter(i=>A(f[i.value]).length>0).map(i=>({query:n==="container"?`mantine-grid (min-width: ${o[i.value]})`:`(min-width: ${o[i.value]})`,styles:f[i.value]}));return t.jsx(Ge,{styles:d,media:n==="container"?void 0:m,container:n==="container"?m:void 0,selector:r})}const Ct={gutter:"md",grow:!1,columns:12},jt=$e((e,{justify:r,align:s,overflow:n})=>({root:{"--grid-justify":r,"--grid-align":s,"--grid-overflow":n}})),z=X((e,r)=>{const s=Z("Grid",Ct,e),{classNames:n,className:a,style:o,styles:d,unstyled:f,vars:l,grow:m,gutter:i,columns:c,align:y,justify:S,children:p,breakpoints:u,type:v,...g}=s,x=qe({name:"Grid",classes:te,props:s,className:a,style:o,classNames:n,styles:d,unstyled:f,vars:l,varsResolver:jt}),w=Pe();return v==="container"&&u?t.jsxs(me,{value:{getStyles:x,grow:m,columns:c||12,breakpoints:u,type:v},children:[t.jsx(ge,{selector:`.${w}`,...s}),t.jsx("div",{...x("container"),children:t.jsx(D,{ref:r,...x("root",{className:w}),...g,children:t.jsx("div",{...x("inner"),children:p})})})]}):t.jsxs(me,{value:{getStyles:x,grow:m,columns:c||12,breakpoints:u,type:v},children:[t.jsx(ge,{selector:`.${w}`,...s}),t.jsx(D,{ref:r,...x("root",{className:w}),...g,children:t.jsx("div",{...x("inner"),children:p})})]})});z.classes=te;z.displayName="@mantine/core/Grid";z.Col=re;var bt=dt("copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);function H(e){if(!e)return!1;const r=e.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const St=[G.Down,G.Right,G.Up,G.Left],Tt=(e,r)=>{let{context:{active:s,collisionRect:n,droppableRects:a,droppableContainers:o,over:d,scrollableAncestors:f}}=r;if(St.includes(e.code)){if(e.preventDefault(),!s||!n)return;const l=[];o.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const y=a.get(c.id);if(y)switch(e.code){case G.Down:n.top<y.top&&l.push(c);break;case G.Up:n.top>y.top&&l.push(c);break;case G.Left:n.left>y.left&&l.push(c);break;case G.Right:n.left<y.left&&l.push(c);break}});const m=He({collisionRect:n,droppableRects:a,droppableContainers:l});let i=Ke(m,"id");if(i===(d==null?void 0:d.id)&&m.length>1&&(i=m[1].id),i!=null){const c=o.get(s.id),y=o.get(i),S=y?a.get(y.id):null,p=y==null?void 0:y.node.current;if(p&&S&&c&&y){const v=Oe(p).some((K,O)=>f[O]!==K),g=Ae(c,y),x=It(c,y),w=v||!g?{x:0,y:0}:{x:x?n.width-S.width:0,y:x?n.height-S.height:0},P={x:S.left,y:S.top};return w.x&&w.y?P:We(P,w)}}}};function Ae(e,r){return!H(e)||!H(r)?!1:e.data.current.sortable.containerId===r.data.current.sortable.containerId}function It(e,r){return!H(e)||!H(r)||!Ae(e,r)?!1:e.data.current.sortable.index<r.data.current.sortable.index}const qt=({row:e,column:r,isOccupied:s=!1,component:n,isSelected:a=!1,onCellClick:o,onComponentSelect:d})=>{const{setNodeRef:f,isOver:l}=Qe({id:`grid-${e}-${r}`,data:{type:"grid-cell",row:e,column:r}}),m=C.useCallback(()=>{n?d==null||d(n.id):o==null||o()},[n,d,o]);return t.jsxs(D,{ref:f,onClick:m,style:i=>({aspectRatio:"1",minHeight:"80px",border:`1px dashed ${i.colors.gray[3]}`,borderRadius:i.radius.sm,backgroundColor:l?i.colors.blue[0]:s?i.colors.gray[0]:"transparent",borderColor:a?i.colors.blue[5]:l?i.colors.blue[4]:i.colors.gray[3],borderStyle:a?"solid":"dashed",borderWidth:a?"2px":"1px",cursor:s?"pointer":"default",transition:"all 150ms ease",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","&:hover":{backgroundColor:s?i.colors.gray[1]:i.colors.blue[0],borderColor:i.colors.blue[4]}}),"data-testid":`layout-canvas-grid-${e}-${r}`,children:[n&&t.jsx($t,{component:n,isSelected:a}),!s&&t.jsxs($,{size:"xs",color:"dimmed",ta:"center",children:[e,",",r]})]})},$t=({component:e,isSelected:r})=>{var i;const{attributes:s,listeners:n,setNodeRef:a,transform:o,isDragging:d}=Ye({id:`component-${e.id}`,data:{type:"component",componentType:e.type,componentId:e.id,source:"canvas"}}),f=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`,zIndex:d?1e3:1,opacity:d?.8:1}:void 0,l=c=>{switch(c){case"DataGrid":return"ðŸ“Š";case"TorqueForm":return"ðŸ“";case"TorqueButton":return"ðŸ”˜";case"Text":return"ðŸ“„";case"Container":return"ðŸ“¦";case"Modal":return"ðŸªŸ";default:return"â“"}},m=c=>{switch(c){case"DataGrid":return"blue";case"TorqueForm":return"green";case"TorqueButton":return"orange";case"Text":return"purple";case"Container":return"gray";case"Modal":return"pink";default:return"gray"}};return t.jsx(V,{ref:a,...n,...s,withBorder:!0,radius:"sm",p:"xs",w:"100%",h:"100%",style:{cursor:"grab",backgroundColor:`var(--mantine-color-${m(e.type)}-0)`,borderColor:r?`var(--mantine-color-${m(e.type)}-5)`:`var(--mantine-color-${m(e.type)}-3)`,...f},"data-testid":`component-${e.type.toLowerCase()}-${e.id}`,children:t.jsxs(_,{gap:4,align:"center",justify:"center",h:"100%",children:[t.jsx($,{size:"lg",children:l(e.type)}),t.jsx($,{size:"xs",fw:500,ta:"center",lineClamp:2,children:e.type}),((i=e.entityBinding)==null?void 0:i.entityId)&&t.jsx(U,{size:"xs",variant:"light",color:m(e.type),children:e.entityBinding.entityId}),e.validation.length>0&&t.jsxs(U,{size:"xs",color:"red",variant:"light",children:[e.validation.length," errors"]})]})})},Be=({components:e=[],selectedComponent:r,gridRows:s=12,gridColumns:n=12,onComponentSelect:a,onComponentMove:o,onComponentDelete:d,onComponentDuplicate:f,onComponentEdit:l,showGrid:m=!0})=>{const[i,c]=C.useState(null),y=Y.useMemo(()=>{const v={};return e.forEach(g=>{for(let x=g.position.row;x<g.position.row+g.position.rowSpan;x++)for(let w=g.position.column;w<g.position.column+g.position.colSpan;w++)v[`${x}-${w}`]=g}),v},[e]),S=C.useCallback((v,g)=>{a==null||a(null),c({row:v,column:g})},[a]),p=C.useCallback(v=>{a==null||a(v)},[a]),u=Y.useMemo(()=>e.find(v=>v.id===r),[e,r]);return t.jsxs(V,{withBorder:!0,radius:"md",h:"100%",style:{display:"flex",flexDirection:"column"},children:[t.jsx(V.Section,{p:"md",withBorder:!0,children:t.jsxs(N,{justify:"space-between",children:[t.jsxs(_,{gap:4,children:[t.jsx($,{size:"lg",fw:600,children:"Layout Canvas"}),t.jsxs(N,{gap:"xs",children:[t.jsxs(U,{variant:"light",size:"sm",children:[s," Ã— ",n]}),t.jsxs(U,{variant:"light",size:"sm",children:[e.length," components"]})]})]}),t.jsx(N,{gap:"xs",children:t.jsx(nt,{label:"Toggle Grid",children:t.jsx(B,{variant:"light",size:"sm",children:t.jsx(at,{size:16})})})})]})}),t.jsx(D,{flex:1,p:"md",style:{overflow:"auto"},children:t.jsx(D,{style:{display:"grid",gridTemplateRows:`repeat(${s}, 1fr)`,gridTemplateColumns:`repeat(${n}, 1fr)`,gap:"4px",minHeight:"600px",width:"100%"},"data-testid":"layout-canvas",children:Array.from({length:s*n},(v,g)=>{const x=Math.floor(g/n),w=g%n,P=`${x}-${w}`,I=y[P];return I&&(I.position.row!==x||I.position.column!==w)?null:t.jsx(qt,{row:x,column:w,isOccupied:!!I,component:I,isSelected:(I==null?void 0:I.id)===r,onCellClick:()=>S(x,w),onComponentSelect:p},P)})})}),u&&t.jsx(V.Section,{p:"md",withBorder:!0,children:t.jsxs(N,{justify:"space-between",children:[t.jsxs(_,{gap:4,children:[t.jsxs($,{size:"sm",fw:500,children:["Selected: ",u.type]}),t.jsxs($,{size:"xs",color:"dimmed",children:["Position: (",u.position.row,", ",u.position.column,") Size: ",u.position.rowSpan," Ã— ",u.position.colSpan]})]}),t.jsxs(N,{gap:"xs",children:[t.jsx(B,{size:"sm",variant:"light",onClick:()=>l==null?void 0:l(u.id),children:t.jsx(ct,{size:14})}),t.jsx(B,{size:"sm",variant:"light",onClick:()=>f==null?void 0:f(u.id),children:t.jsx(bt,{size:14})}),t.jsx(B,{size:"sm",variant:"light",color:"red",onClick:()=>d==null?void 0:d(u.id),children:t.jsx(ut,{size:14})})]})]})})]})};Be.__docgenInfo={description:"",methods:[],displayName:"LayoutCanvas",props:{components:{required:!1,tsType:{name:"Array",elements:[{name:"LayoutEditorComponent"}],raw:"LayoutEditorComponent[]"},description:"",defaultValue:{value:"[]",computed:!1}},selectedComponent:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},gridRows:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"12",computed:!1}},gridColumns:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"12",computed:!1}},onComponentSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"componentId"}],return:{name:"void"}}},description:""},onComponentMove:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string, newPosition: GridPosition) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"},{type:{name:"GridPosition"},name:"newPosition"}],return:{name:"void"}}},description:""},onComponentDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"}],return:{name:"void"}}},description:""},onComponentDuplicate:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"}],return:{name:"void"}}},description:""},onComponentEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"}],return:{name:"void"}}},description:""},showGrid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const Et=(e,r)=>{const s=r(e.toLowerCase())||r("datagrid")||r("torqueform")||r("torquebutton");if(s&&s.defaultConfiguration)return s.defaultConfiguration;switch(e){case"DataGrid":return{dataGrid:{entityId:"",columns:[],pagination:{enabled:!0,pageSize:25},filtering:{enabled:!0},sorting:{enabled:!0},actions:[]}};case"TorqueForm":return{form:{entityId:"",fields:[],validation:{clientSide:!0,serverSide:!0,realTime:!0},layout:"single-column",submission:{action:"create"}}};case"TorqueButton":return{button:{label:"Button",variant:"filled",color:"blue",size:"md",action:{type:"custom"}}};case"Text":return{text:{content:"Text Content",variant:"body",alignment:"left"}};case"Container":return{container:{padding:"16px"}};default:return{}}},Nt=(e,r,s=12)=>{const n=new Set;e.forEach(a=>{for(let o=a.position.row;o<a.position.row+a.position.rowSpan;o++)for(let d=a.position.column;d<a.position.column+a.position.colSpan;d++)n.add(`${o}-${d}`)});for(let a=0;a<12;a++)for(let o=0;o<=s-r.colSpan;o++){let d=!0;for(let f=a;f<a+r.rowSpan&&d;f++)for(let l=o;l<o+r.colSpan&&d;l++)n.has(`${f}-${l}`)&&(d=!1);if(d)return{row:a,column:o,rowSpan:r.rowSpan,colSpan:r.colSpan}}return{row:0,column:0,rowSpan:r.rowSpan,colSpan:r.colSpan}},ke=({modelId:e,layoutId:r,onSave:s,onPreview:n,onBack:a,entities:o=[],initialComponents:d=[]})=>{const{getById:f}=Je(),[l,m]=C.useState(d),[i,c]=C.useState(null),[y,S]=C.useState(""),[p,u]=C.useState(null),[v,g]=C.useState(!1);Y.useEffect(()=>{m(d),g(!1)},[d]);const x=Xe(ae(ot,{activationConstraint:{distance:8}}),ae(rt,{coordinateGetter:Tt})),w=C.useMemo(()=>l.find(h=>h.id===i),[l,i]),P=C.useCallback(h=>{u(h.active.data.current)},[]),I=C.useCallback(h=>{const{active:T,over:q}=h;if(!q){u(null);return}const j=T.data.current,b=q.data.current;if((j==null?void 0:j.source)==="palette"&&(b==null?void 0:b.type)==="grid-cell"){const E=j.componentType,W=b.row,Q=b.column,L={DataGrid:{rowSpan:4,colSpan:6},TorqueForm:{rowSpan:6,colSpan:4},TorqueButton:{rowSpan:1,colSpan:2},Text:{rowSpan:1,colSpan:4},Container:{rowSpan:3,colSpan:6},Modal:{rowSpan:4,colSpan:4}}[E]||{rowSpan:2,colSpan:3},ne={id:le(),type:E,position:{row:W,column:Q,...L},configuration:Et(E,f),validation:[]};m(Ue=>[...Ue,ne]),c(ne.id),g(!0)}if((j==null?void 0:j.source)==="canvas"&&(b==null?void 0:b.type)==="grid-cell"){const E=j.componentId,W=b.row,Q=b.column;m(se=>se.map(L=>L.id===E?{...L,position:{...L.position,row:W,column:Q}}:L)),g(!0)}u(null)},[]),K=C.useCallback(h=>{c(h)},[]),O=C.useCallback((h,T)=>{m(q=>q.map(j=>j.id===h?{...j,configuration:T}:j)),g(!0)},[]),_e=C.useCallback(h=>{m(T=>T.filter(q=>q.id!==h)),i===h&&c(null),g(!0)},[i]),Re=C.useCallback(h=>{const T=l.find(b=>b.id===h);if(!T)return;const q=Nt(l,{rowSpan:T.position.rowSpan,colSpan:T.position.colSpan}),j={...T,id:le(),position:q};m(b=>[...b,j]),c(j.id),g(!0)},[l]),Me=C.useCallback(async h=>{var q,j,b,E;const T=[];return h.type==="DataGrid"&&((q=h.configuration.dataGrid)!=null&&q.entityId||T.push({field:"entity",message:"Entity selection is required for DataGrid",severity:"error"}),(b=(j=h.configuration.dataGrid)==null?void 0:j.columns)!=null&&b.length||T.push({field:"columns",message:"At least one column is required for DataGrid",severity:"error"})),h.type==="TorqueForm"&&((E=h.configuration.form)!=null&&E.entityId||T.push({field:"entity",message:"Entity selection is required for Form",severity:"error"})),h.position.row+h.position.rowSpan>12&&T.push({field:"position",message:"Component extends beyond grid boundaries",severity:"error"}),T},[]),Fe=C.useCallback(()=>{s==null||s(l),g(!1)},[l,s]),Ve=C.useCallback(()=>{n==null||n(l)},[l,n]);return t.jsx(ee,{size:"100%",p:"md","data-testid":"layout-editor",children:t.jsxs(_,{gap:"md",children:[t.jsxs(de,{p:"md",withBorder:!0,children:[t.jsxs(N,{justify:"space-between",children:[t.jsxs(N,{align:"flex-start",children:[a&&t.jsx(B,{variant:"subtle",onClick:a,size:"lg","aria-label":"Go back to model editor",children:t.jsx(pt,{size:20})}),t.jsxs(_,{gap:4,children:[t.jsx($,{size:"xl",fw:700,children:"Layout Editor"}),t.jsx($,{size:"sm",color:"dimmed",children:"Design your application interface with drag-and-drop components"})]})]}),t.jsxs(N,{gap:"sm",children:[t.jsx(ce,{variant:"outline",onClick:Ve,disabled:l.length===0,"data-testid":"preview-layout",children:"Preview"}),t.jsx(ce,{onClick:Fe,disabled:!v&&!r,"data-testid":"save-layout",children:r?"Update Layout":"Save Layout"})]})]}),v&&t.jsx(ft,{color:"yellow",mt:"md",children:"You have unsaved changes. Don't forget to save your layout."})]}),t.jsxs(Ie,{sensors:x,collisionDetection:Ze,onDragStart:P,onDragEnd:I,children:[t.jsxs(z,{gutter:"md",style:{minHeight:"600px"},children:[t.jsx(z.Col,{span:3,children:t.jsx(et,{searchQuery:y,onSearchChange:S})}),t.jsx(z.Col,{span:6,children:t.jsx(Be,{components:l,selectedComponent:i,onComponentSelect:K,onComponentDelete:_e,onComponentDuplicate:Re})}),t.jsx(z.Col,{span:3,children:t.jsx(mt,{component:w,onUpdate:O,onValidate:Me,entities:o})})]}),t.jsx(tt,{children:p&&t.jsx(de,{withBorder:!0,p:"sm",shadow:"md",children:t.jsx($,{size:"sm",fw:500,children:p.componentType||"Component"})})})]})]})})};ke.__docgenInfo={description:"",methods:[],displayName:"LayoutEditor",props:{modelId:{required:!0,tsType:{name:"string"},description:""},layoutId:{required:!1,tsType:{name:"string"},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"(components: LayoutEditorComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"LayoutEditorComponent"}],raw:"LayoutEditorComponent[]"},name:"components"}],return:{name:"void"}}},description:""},onPreview:{required:!1,tsType:{name:"signature",type:"function",raw:"(components: LayoutEditorComponent[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"LayoutEditorComponent"}],raw:"LayoutEditorComponent[]"},name:"components"}],return:{name:"void"}}},description:""},onBack:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},entities:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; name: string; displayName: string; fields: any[] }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"displayName",value:{name:"string",required:!0}},{key:"fields",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!0}}]}}],raw:"Array<{ id: string; name: string; displayName: string; fields: any[] }>"},description:"",defaultValue:{value:"[]",computed:!1}},initialComponents:{required:!1,tsType:{name:"Array",elements:[{name:"LayoutEditorComponent"}],raw:"LayoutEditorComponent[]"},description:"",defaultValue:{value:"[]",computed:!1}}}};const oe=[{id:"customer",name:"customer",displayName:"Customer",fields:[{id:"first_name",name:"first_name",displayName:"First Name",fieldType:{type:"String"},required:!0},{id:"last_name",name:"last_name",displayName:"Last Name",fieldType:{type:"String"},required:!0},{id:"email",name:"email",displayName:"Email",fieldType:{type:"String"},required:!0},{id:"phone",name:"phone",displayName:"Phone",fieldType:{type:"String"},required:!1}]},{id:"order",name:"order",displayName:"Order",fields:[{id:"order_date",name:"order_date",displayName:"Order Date",fieldType:{type:"DateTime"},required:!0},{id:"total_amount",name:"total_amount",displayName:"Total Amount",fieldType:{type:"Float"},required:!0},{id:"status",name:"status",displayName:"Status",fieldType:{type:"Enum",values:["Draft","Pending","Confirmed","Shipped","Delivered"]},required:!0}]}],dr={title:"Layout Editor/Main Editor",component:ke,parameters:{layout:"fullscreen",docs:{description:{component:"The main layout editor component that allows drag-and-drop design of TorqueApp interfaces."}}},decorators:[e=>t.jsx(yt,{children:t.jsx(Ie,{children:t.jsx("div",{style:{padding:"16px",minHeight:"100vh"},children:t.jsx(e,{})})})})],argTypes:{modelId:{control:"text",description:"The ID of the model being edited"},layoutId:{control:"text",description:"The ID of the layout being edited (optional for new layouts)"}}},R={args:{modelId:"customer-order-model",layoutId:void 0,entities:oe,onSave:e=>{console.log("Save layout:",e)},onPreview:e=>{console.log("Preview layout:",e)}},parameters:{docs:{description:{story:"An empty layout editor canvas ready for component placement."}}}},M={args:{modelId:"customer-order-model",layoutId:"customer-dashboard",entities:oe,onSave:e=>{console.log("Save layout:",e)},onPreview:e=>{console.log("Preview layout:",e)}},parameters:{docs:{description:{story:"Layout editor with pre-configured components showing the editing interface."}}}},F={args:{modelId:"customer-order-model",layoutId:"customer-dashboard",entities:oe,onSave:e=>{console.log("Save layout:",e)},onPreview:e=>{console.log("Preview layout:",e)}},parameters:{docs:{description:{story:"Layout editor demonstrating entity selection and binding workflow."}}}};var he,ve,xe;R.parameters={...R.parameters,docs:{...(he=R.parameters)==null?void 0:he.docs,source:{originalSource:`{
  args: {
    modelId: 'customer-order-model',
    layoutId: undefined,
    entities: mockEntities,
    onSave: components => {
      console.log('Save layout:', components);
    },
    onPreview: components => {
      console.log('Preview layout:', components);
    }
  },
  parameters: {
    docs: {
      description: {
        story: 'An empty layout editor canvas ready for component placement.'
      }
    }
  }
}`,...(xe=(ve=R.parameters)==null?void 0:ve.docs)==null?void 0:xe.source}}};var we,Ce,je;M.parameters={...M.parameters,docs:{...(we=M.parameters)==null?void 0:we.docs,source:{originalSource:`{
  args: {
    modelId: 'customer-order-model',
    layoutId: 'customer-dashboard',
    entities: mockEntities,
    onSave: components => {
      console.log('Save layout:', components);
    },
    onPreview: components => {
      console.log('Preview layout:', components);
    }
  },
  parameters: {
    docs: {
      description: {
        story: 'Layout editor with pre-configured components showing the editing interface.'
      }
    }
  }
}`,...(je=(Ce=M.parameters)==null?void 0:Ce.docs)==null?void 0:je.source}}};var be,Se,Te;F.parameters={...F.parameters,docs:{...(be=F.parameters)==null?void 0:be.docs,source:{originalSource:`{
  args: {
    modelId: 'customer-order-model',
    layoutId: 'customer-dashboard',
    entities: mockEntities,
    onSave: components => {
      console.log('Save layout:', components);
    },
    onPreview: components => {
      console.log('Preview layout:', components);
    }
  },
  parameters: {
    docs: {
      description: {
        story: 'Layout editor demonstrating entity selection and binding workflow.'
      }
    }
  }
}`,...(Te=(Se=F.parameters)==null?void 0:Se.docs)==null?void 0:Te.source}}};const cr=["EmptyCanvas","WithSampleComponents","EntitySelectionFocus"];export{R as EmptyCanvas,F as EntitySelectionFocus,M as WithSampleComponents,cr as __namedExportsOrder,dr as default};
