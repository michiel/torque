import{j as o}from"./jsx-runtime-CDt2p4po.js";import{r as u,R as Ve}from"./index-GiUgBvb1.js";import{v as Yt}from"./v4-CtRu48qb.js";import{O as Kt,g as ee}from"./use-floating-auto-update-T6hkbBTP.js";import{B as D,e as pt,g as Ut,o as H,u as N,f as _,a as Pe,b as Be,k as Ht,l as Gt,r as Re,i as ft,d as ht,m as Xt,t as Zt,h as Qt,c as te}from"./createReactComponent-DeW0SWsj.js";import{c as he,T as C,G as L}from"./Text-DRIe2lk6.js";import{C as gt,b as yt,I as vt,a as er,S as tr,c as rr}from"./InputBase-qatfRSiM.js";import{a as nr,F as or,O as sr,u as ar}from"./FocusTrap-D951crCF.js";import{P as W}from"./Paper-C74rEzGU.js";import{a as ir,T as xt}from"./Transition-CgjnMQvV.js";import{b as lr,n as cr,a as bt}from"./floating-ui.react-CpMue5oT.js";import{S as B}from"./Stack-BdVTzV5n.js";import{S as se,T as St,a as dr,I as ur}from"./IconUpload-Bs6sJkg4.js";import{B as k}from"./Badge-DlnNQPvo.js";import{g as mr,I as wt,A as pr,a as We}from"./IconX-DFCRbXwC.js";import{A as me,T as J}from"./Tabs-DIZ0DkZF.js";import{B as Q}from"./Button-DxGj0eyG.js";import{T as fr}from"./Tooltip-BGSxJkNY.js";import{I as hr}from"./IconTrash-eEDGOZ4_.js";import"./index-CROobee-.js";import"./UnstyledButton-93KfNP2S.js";var A=function(){return A=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},A.apply(this,arguments)};function jt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function gr(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var pe="right-scroll-bar-position",fe="width-before-scroll-bar",yr="with-scroll-bars-hidden",vr="--removed-body-scroll-bar-size";function Me(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function xr(e,t){var r=u.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var br=typeof window<"u"?u.useLayoutEffect:u.useEffect,Je=new WeakMap;function Sr(e,t){var r=xr(null,function(n){return e.forEach(function(s){return Me(s,n)})});return br(function(){var n=Je.get(r);if(n){var s=new Set(n),a=new Set(e),l=r.current;s.forEach(function(i){a.has(i)||Me(i,null)}),a.forEach(function(i){s.has(i)||Me(i,l)})}Je.set(r,e)},[e]),r}function wr(e){return e}function jr(e,t){t===void 0&&(t=wr);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var l=t(a,n);return r.push(l),function(){r=r.filter(function(i){return i!==l})}},assignSyncMedium:function(a){for(n=!0;r.length;){var l=r;r=[],l.forEach(a)}r={push:function(i){return a(i)},filter:function(){return r}}},assignMedium:function(a){n=!0;var l=[];if(r.length){var i=r;r=[],i.forEach(a),l=r}var c=function(){var f=l;l=[],f.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(f){l.push(f),d()},filter:function(f){return l=l.filter(f),r}}}};return s}function Cr(e){e===void 0&&(e={});var t=jr(null);return t.options=A({async:!0,ssr:!1},e),t}var Ct=function(e){var t=e.sideCar,r=jt(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return u.createElement(n,A({},r))};Ct.isSideCarExport=!0;function Er(e,t){return e.useMedium(t),Ct}var Et=Cr(),Oe=function(){},ge=u.forwardRef(function(e,t){var r=u.useRef(null),n=u.useState({onScrollCapture:Oe,onWheelCapture:Oe,onTouchMoveCapture:Oe}),s=n[0],a=n[1],l=e.forwardProps,i=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,p=e.shards,v=e.sideCar,h=e.noRelative,x=e.noIsolation,m=e.inert,y=e.allowPinchZoom,b=e.as,w=b===void 0?"div":b,I=e.gapMode,M=jt(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=v,E=Sr([r,t]),g=A(A({},M),s);return u.createElement(u.Fragment,null,f&&u.createElement(S,{sideCar:Et,removeScrollBar:d,shards:p,noRelative:h,noIsolation:x,inert:m,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:I}),l?u.cloneElement(u.Children.only(i),A(A({},g),{ref:E})):u.createElement(w,A({},g,{className:c,ref:E}),i))});ge.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ge.classNames={fullWidth:fe,zeroRight:pe};var Ir=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mr(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ir();return t&&e.setAttribute("nonce",t),e}function Or(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Nr(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var _r=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Mr())&&(Or(t,r),Nr(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Tr=function(){var e=_r();return function(t,r){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},It=function(){var e=Tr(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},Rr={left:0,top:0,right:0,gap:0},Ne=function(e){return parseInt(e||"",10)||0},kr=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Ne(r),Ne(n),Ne(s)]},Pr=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Rr;var t=kr(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Br=It(),U="data-scroll-locked",Ar=function(e,t,r,n){var s=e.left,a=e.top,l=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(yr,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(U,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(pe,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(fe,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(pe," .").concat(pe,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(fe," .").concat(fe,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(U,`] {
    `).concat(vr,": ").concat(i,`px;
  }
`)},Ye=function(){var e=parseInt(document.body.getAttribute(U)||"0",10);return isFinite(e)?e:0},Lr=function(){u.useEffect(function(){return document.body.setAttribute(U,(Ye()+1).toString()),function(){var e=Ye()-1;e<=0?document.body.removeAttribute(U):document.body.setAttribute(U,e.toString())}},[])},Dr=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;Lr();var a=u.useMemo(function(){return Pr(s)},[s]);return u.createElement(Br,{styles:Ar(a,!t,s,r?"":"!important")})},ke=!1;if(typeof window<"u")try{var ae=Object.defineProperty({},"passive",{get:function(){return ke=!0,!0}});window.addEventListener("test",ae,ae),window.removeEventListener("test",ae,ae)}catch{ke=!1}var Y=ke?{passive:!1}:!1,zr=function(e){return e.tagName==="TEXTAREA"},Mt=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!zr(e)&&r[t]==="visible")},Fr=function(e){return Mt(e,"overflowY")},$r=function(e){return Mt(e,"overflowX")},Ke=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Ot(e,n);if(s){var a=Nt(e,n),l=a[1],i=a[2];if(l>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},qr=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Vr=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Ot=function(e,t){return e==="v"?Fr(t):$r(t)},Nt=function(e,t){return e==="v"?qr(t):Vr(t)},Wr=function(e,t){return e==="h"&&t==="rtl"?-1:1},Jr=function(e,t,r,n,s){var a=Wr(e,window.getComputedStyle(t).direction),l=a*n,i=r.target,c=t.contains(i),d=!1,f=l>0,p=0,v=0;do{if(!i)break;var h=Nt(e,i),x=h[0],m=h[1],y=h[2],b=m-y-a*x;(x||b)&&Ot(e,i)&&(p+=b,v+=x);var w=i.parentNode;i=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&i!==document.body||c&&(t.contains(i)||t===i));return(f&&Math.abs(p)<1||!f&&Math.abs(v)<1)&&(d=!0),d},ie=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ue=function(e){return[e.deltaX,e.deltaY]},He=function(e){return e&&"current"in e?e.current:e},Yr=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Kr=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ur=0,K=[];function Hr(e){var t=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),s=u.useState(Ur++)[0],a=u.useState(It)[0],l=u.useRef(e);u.useEffect(function(){l.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=gr([e.lockRef.current],(e.shards||[]).map(He),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=u.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!l.current.allowPinchZoom;var b=ie(m),w=r.current,I="deltaX"in m?m.deltaX:w[0]-b[0],M="deltaY"in m?m.deltaY:w[1]-b[1],S,E=m.target,g=Math.abs(I)>Math.abs(M)?"h":"v";if("touches"in m&&g==="h"&&E.type==="range")return!1;var j=Ke(g,E);if(!j)return!0;if(j?S=g:(S=g==="v"?"h":"v",j=Ke(g,E)),!j)return!1;if(!n.current&&"changedTouches"in m&&(I||M)&&(n.current=S),!S)return!0;var O=n.current||S;return Jr(O,y,m,O==="h"?I:M)},[]),c=u.useCallback(function(m){var y=m;if(!(!K.length||K[K.length-1]!==a)){var b="deltaY"in y?Ue(y):ie(y),w=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&Yr(S.delta,b)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var I=(l.current.shards||[]).map(He).filter(Boolean).filter(function(S){return S.contains(y.target)}),M=I.length>0?i(y,I[0]):!l.current.noIsolation;M&&y.cancelable&&y.preventDefault()}}},[]),d=u.useCallback(function(m,y,b,w){var I={name:m,delta:y,target:b,should:w,shadowParent:Gr(b)};t.current.push(I),setTimeout(function(){t.current=t.current.filter(function(M){return M!==I})},1)},[]),f=u.useCallback(function(m){r.current=ie(m),n.current=void 0},[]),p=u.useCallback(function(m){d(m.type,Ue(m),m.target,i(m,e.lockRef.current))},[]),v=u.useCallback(function(m){d(m.type,ie(m),m.target,i(m,e.lockRef.current))},[]);u.useEffect(function(){return K.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",c,Y),document.addEventListener("touchmove",c,Y),document.addEventListener("touchstart",f,Y),function(){K=K.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,Y),document.removeEventListener("touchmove",c,Y),document.removeEventListener("touchstart",f,Y)}},[]);var h=e.removeScrollBar,x=e.inert;return u.createElement(u.Fragment,null,x?u.createElement(a,{styles:Kr(s)}):null,h?u.createElement(Dr,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Gr(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Xr=Er(Et,Hr);var _t=u.forwardRef(function(e,t){return u.createElement(ge,A({},e,{ref:t,sideCar:Xr}))});_t.classNames=ge.classNames;function Zr(e,t,r){u.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}const[Qr,z]=he("ModalBase component was not found in tree");function en({opened:e,transitionDuration:t}){const[r,n]=u.useState(e),s=u.useRef(-1),l=ir()?0:t;return u.useEffect(()=>(e?(n(!0),window.clearTimeout(s.current)):l===0?n(!1):s.current=window.setTimeout(()=>n(!1),l),()=>window.clearTimeout(s.current)),[e,l]),r}function tn({id:e,transitionProps:t,opened:r,trapFocus:n,closeOnEscape:s,onClose:a,returnFocus:l}){const i=lr(e),[c,d]=u.useState(!1),[f,p]=u.useState(!1),v=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=en({opened:r,transitionDuration:v});return Zr("keydown",x=>{var m;x.key==="Escape"&&s&&!x.isComposing&&r&&((m=x.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&a()},{capture:!0}),nr({opened:r,shouldReturnFocus:n&&l}),{_id:i,titleMounted:c,bodyMounted:f,shouldLockScroll:h,setTitleMounted:d,setBodyMounted:p}}const Tt=u.forwardRef(({keepMounted:e,opened:t,onClose:r,id:n,transitionProps:s,onExitTransitionEnd:a,onEnterTransitionEnd:l,trapFocus:i,closeOnEscape:c,returnFocus:d,closeOnClickOutside:f,withinPortal:p,portalProps:v,lockScroll:h,children:x,zIndex:m,shadow:y,padding:b,__vars:w,unstyled:I,removeScrollProps:M,...S},E)=>{const{_id:g,titleMounted:j,bodyMounted:O,shouldLockScroll:T,setTitleMounted:$,setBodyMounted:Ie}=tn({id:n,transitionProps:s,opened:t,trapFocus:i,closeOnEscape:c,onClose:r,returnFocus:d}),{key:P,...ne}=M||{};return o.jsx(Kt,{...v,withinPortal:p,children:o.jsx(Qr,{value:{opened:t,onClose:r,closeOnClickOutside:f,onExitTransitionEnd:a,onEnterTransitionEnd:l,transitionProps:{...s,keepMounted:e},getTitleId:()=>`${g}-title`,getBodyId:()=>`${g}-body`,titleMounted:j,bodyMounted:O,setTitleMounted:$,setBodyMounted:Ie,trapFocus:i,closeOnEscape:c,zIndex:m,unstyled:I},children:o.jsx(_t,{enabled:T&&h,...ne,children:o.jsx(D,{ref:E,...S,__vars:{...w,"--mb-z-index":(m||ee("modal")).toString(),"--mb-shadow":Ut(y),"--mb-padding":pt(b)},children:x})},P)})})});Tt.displayName="@mantine/core/ModalBase";function rn(){const e=z();return u.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var G={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Rt=u.forwardRef(({className:e,...t},r)=>{const n=rn(),s=z();return o.jsx(D,{ref:r,...t,id:n,className:H({[G.body]:!s.unstyled},e)})});Rt.displayName="@mantine/core/ModalBaseBody";const kt=u.forwardRef(({className:e,onClick:t,...r},n)=>{const s=z();return o.jsx(gt,{ref:n,...r,onClick:a=>{s.onClose(),t==null||t(a)},className:H({[G.close]:!s.unstyled},e),unstyled:s.unstyled})});kt.displayName="@mantine/core/ModalBaseCloseButton";const Pt=u.forwardRef(({transitionProps:e,className:t,innerProps:r,onKeyDown:n,style:s,...a},l)=>{const i=z();return o.jsx(xt,{mounted:i.opened,transition:"pop",...i.transitionProps,onExited:()=>{var c,d,f;(c=i.onExitTransitionEnd)==null||c.call(i),(f=(d=i.transitionProps)==null?void 0:d.onExited)==null||f.call(d)},onEntered:()=>{var c,d,f;(c=i.onEnterTransitionEnd)==null||c.call(i),(f=(d=i.transitionProps)==null?void 0:d.onEntered)==null||f.call(d)},...e,children:c=>o.jsx("div",{...r,className:H({[G.inner]:!i.unstyled},r.className),children:o.jsx(or,{active:i.opened&&i.trapFocus,innerRef:l,children:o.jsx(W,{...a,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":i.bodyMounted?i.getBodyId():void 0,"aria-labelledby":i.titleMounted?i.getTitleId():void 0,style:[s,c],className:H({[G.content]:!i.unstyled},t),unstyled:i.unstyled,children:a.children})})})})});Pt.displayName="@mantine/core/ModalBaseContent";const Bt=u.forwardRef(({className:e,...t},r)=>{const n=z();return o.jsx(D,{component:"header",ref:r,className:H({[G.header]:!n.unstyled},e),...t})});Bt.displayName="@mantine/core/ModalBaseHeader";const nn={duration:200,timingFunction:"ease",transition:"fade"};function on(e){const t=z();return{...nn,...t.transitionProps,...e}}const At=u.forwardRef(({onClick:e,transitionProps:t,style:r,visible:n,...s},a)=>{const l=z(),i=on(t);return o.jsx(xt,{mounted:n!==void 0?n:l.opened,...i,transition:"fade",children:c=>o.jsx(sr,{ref:a,fixed:!0,style:[r,c],zIndex:l.zIndex,unstyled:l.unstyled,onClick:d=>{e==null||e(d),l.closeOnClickOutside&&l.onClose()},...s})})});At.displayName="@mantine/core/ModalBaseOverlay";function sn(){const e=z();return u.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Lt=u.forwardRef(({className:e,...t},r)=>{const n=sn(),s=z();return o.jsx(D,{component:"h2",ref:r,className:H({[G.title]:!s.unstyled},e),...t,id:n})});Lt.displayName="@mantine/core/ModalBaseTitle";function an({children:e}){return o.jsx(o.Fragment,{children:e})}const ln={multiple:!1},Dt=u.forwardRef((e,t)=>{const{onChange:r,children:n,multiple:s,accept:a,name:l,form:i,resetRef:c,disabled:d,capture:f,inputProps:p,...v}=N("FileButton",ln,e),h=u.useRef(null),x=()=>{var b;!d&&((b=h.current)==null||b.click())},m=b=>{r(s?Array.from(b.currentTarget.files):b.currentTarget.files[0]||null)};return cr(c,()=>{h.current&&(h.current.value="")}),o.jsxs(o.Fragment,{children:[o.jsx("input",{style:{display:"none"},type:"file",accept:a,multiple:s,onChange:m,ref:bt(t,h),name:l,form:i,capture:f,...p}),n({onClick:x,...v})]})});Dt.displayName="@mantine/core/FileButton";const cn=({value:e})=>o.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(e)?e.map(t=>t.name).join(", "):e==null?void 0:e.name}),dn={valueComponent:cn},Ae=_((e,t)=>{const r=N("FileInput",dn,e),{unstyled:n,vars:s,onChange:a,value:l,defaultValue:i,multiple:c,accept:d,name:f,form:p,valueComponent:v,clearable:h,clearButtonProps:x,readOnly:m,capture:y,fileInputProps:b,rightSection:w,size:I,placeholder:M,component:S,resetRef:E,classNames:g,styles:j,...O}=r,T=u.useRef(null),{resolvedClassNames:$,resolvedStyles:Ie}=yt({classNames:g,styles:j,props:r}),[P,ne]=ar({value:l,defaultValue:i,onChange:a,finalValue:c?[]:null}),qe=Array.isArray(P)?P.length!==0:P!==null,Wt=w||(h&&qe&&!m?o.jsx(gt,{...x,variant:"subtle",onClick:()=>ne(c?[]:null),size:I,unstyled:n}):null);u.useEffect(()=>{var oe;(Array.isArray(P)&&P.length===0||P===null)&&((oe=T.current)==null||oe.call(T))},[P]);const Jt=v;return o.jsx(Dt,{onChange:ne,multiple:c,accept:d,name:f,form:p,resetRef:bt(T,E),disabled:m,capture:y,inputProps:b,children:oe=>o.jsx(vt,{component:S||"button",ref:t,rightSection:Wt,...oe,...O,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:n,size:I,classNames:g,styles:j,children:qe?o.jsx(Jt,{value:P}):o.jsx(er.Placeholder,{__staticSelector:"FileInput",classNames:$,styles:Ie,children:M})})})});Ae.classes=vt.classes;Ae.displayName="@mantine/core/FileInput";const un=Ae,[mn,pn]=he("List component was not found in tree");var Le={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const fn={},De=_((e,t)=>{const r=N("ListItem",fn,e),{classNames:n,className:s,style:a,styles:l,vars:i,icon:c,children:d,mod:f,...p}=r,v=pn(),h=c||v.icon,x={classNames:n,styles:l};return o.jsx(D,{...v.getStyles("item",{...x,className:s,style:a}),component:"li",mod:[{"with-icon":!!h,centered:v.center},f],ref:t,...p,children:o.jsxs("div",{...v.getStyles("itemWrapper",x),children:[h&&o.jsx("span",{...v.getStyles("itemIcon",x),children:h}),o.jsx("span",{...v.getStyles("itemLabel",x),children:d})]})})});De.classes=Le;De.displayName="@mantine/core/ListItem";const hn={type:"unordered"},gn=Be((e,{size:t,spacing:r})=>({root:{"--list-fz":Gt(t),"--list-lh":Ht(t),"--list-spacing":pt(r)}})),V=_((e,t)=>{const r=N("List",hn,e),{classNames:n,className:s,style:a,styles:l,unstyled:i,vars:c,children:d,type:f,withPadding:p,icon:v,spacing:h,center:x,listStyleType:m,mod:y,...b}=r,w=Pe({name:"List",classes:Le,props:r,className:s,style:a,classNames:n,styles:l,unstyled:i,vars:c,varsResolver:gn});return o.jsx(mn,{value:{center:x,icon:v,getStyles:w},children:o.jsx(D,{...w("root",{style:{listStyleType:m}}),component:f==="unordered"?"ul":"ol",mod:[{"with-padding":p},y],ref:t,...b,children:d})})});V.classes=Le;V.displayName="@mantine/core/List";V.Item=De;const[yn,X]=he("Modal component was not found in tree");var F={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const vn={},ye=_((e,t)=>{const r=N("ModalBody",vn,e),{classNames:n,className:s,style:a,styles:l,vars:i,...c}=r,d=X();return o.jsx(Rt,{ref:t,...d.getStyles("body",{classNames:n,style:a,styles:l,className:s}),...c})});ye.classes=F;ye.displayName="@mantine/core/ModalBody";const xn={},ve=_((e,t)=>{const r=N("ModalCloseButton",xn,e),{classNames:n,className:s,style:a,styles:l,vars:i,...c}=r,d=X();return o.jsx(kt,{ref:t,...d.getStyles("close",{classNames:n,style:a,styles:l,className:s}),...c})});ve.classes=F;ve.displayName="@mantine/core/ModalCloseButton";const bn={},xe=_((e,t)=>{const r=N("ModalContent",bn,e),{classNames:n,className:s,style:a,styles:l,vars:i,children:c,__hidden:d,...f}=r,p=X(),v=p.scrollAreaComponent||an;return o.jsx(Pt,{...p.getStyles("content",{className:s,style:a,styles:l,classNames:n}),innerProps:p.getStyles("inner",{className:s,style:a,styles:l,classNames:n}),"data-full-screen":p.fullScreen||void 0,"data-modal-content":!0,"data-hidden":d||void 0,ref:t,...f,children:o.jsx(v,{style:{maxHeight:p.fullScreen?"100dvh":`calc(100dvh - (${Re(p.yOffset)} * 2))`},children:c})})});xe.classes=F;xe.displayName="@mantine/core/ModalContent";const Sn={},be=_((e,t)=>{const r=N("ModalHeader",Sn,e),{classNames:n,className:s,style:a,styles:l,vars:i,...c}=r,d=X();return o.jsx(Bt,{ref:t,...d.getStyles("header",{classNames:n,style:a,styles:l,className:s}),...c})});be.classes=F;be.displayName="@mantine/core/ModalHeader";const wn={},Se=_((e,t)=>{const r=N("ModalOverlay",wn,e),{classNames:n,className:s,style:a,styles:l,vars:i,...c}=r,d=X();return o.jsx(At,{ref:t,...d.getStyles("overlay",{classNames:n,style:a,styles:l,className:s}),...c})});Se.classes=F;Se.displayName="@mantine/core/ModalOverlay";const jn={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ee("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},Cn=Be((e,{radius:t,size:r,yOffset:n,xOffset:s})=>({root:{"--modal-radius":t===void 0?void 0:ht(t),"--modal-size":ft(r,"modal-size"),"--modal-y-offset":Re(n),"--modal-x-offset":Re(s)}})),we=_((e,t)=>{const r=N("ModalRoot",jn,e),{classNames:n,className:s,style:a,styles:l,unstyled:i,vars:c,yOffset:d,scrollAreaComponent:f,radius:p,fullScreen:v,centered:h,xOffset:x,__staticSelector:m,...y}=r,b=Pe({name:m,classes:F,props:r,className:s,style:a,classNames:n,styles:l,unstyled:i,vars:c,varsResolver:Cn});return o.jsx(yn,{value:{yOffset:d,scrollAreaComponent:f,getStyles:b,fullScreen:v},children:o.jsx(Tt,{ref:t,...b("root"),"data-full-screen":v||void 0,"data-centered":h||void 0,"data-offset-scrollbars":f===tr.Autosize||void 0,unstyled:i,...y})})});we.classes=F;we.displayName="@mantine/core/ModalRoot";const[En,In]=rr();function zt({children:e}){const[t,r]=u.useState([]),[n,s]=u.useState(ee("modal"));return o.jsx(En,{value:{stack:t,addModal:(a,l)=>{r(i=>[...new Set([...i,a])]),s(i=>typeof l=="number"&&typeof i=="number"?Math.max(i,l):i)},removeModal:a=>r(l=>l.filter(i=>i!==a)),getZIndex:a=>`calc(${n} + ${t.indexOf(a)} + 1)`,currentId:t[t.length-1],maxZIndex:n},children:e})}zt.displayName="@mantine/core/ModalStack";const Mn={},je=_((e,t)=>{const r=N("ModalTitle",Mn,e),{classNames:n,className:s,style:a,styles:l,vars:i,...c}=r,d=X();return o.jsx(Lt,{ref:t,...d.getStyles("title",{classNames:n,style:a,styles:l,className:s}),...c})});je.classes=F;je.displayName="@mantine/core/ModalTitle";const On={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ee("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},R=_((e,t)=>{const{title:r,withOverlay:n,overlayProps:s,withCloseButton:a,closeButtonProps:l,children:i,radius:c,opened:d,stackId:f,zIndex:p,...v}=N("Modal",On,e),h=In(),x=!!r||a,m=h&&f?{closeOnEscape:h.currentId===f,trapFocus:h.currentId===f,zIndex:h.getZIndex(f)}:{},y=n===!1?!1:f&&h?h.currentId===f:d;return u.useEffect(()=>{h&&f&&(d?h.addModal(f,p||ee("modal")):h.removeModal(f))},[d,f,p]),o.jsxs(we,{ref:t,radius:c,opened:d,zIndex:h&&f?h.getZIndex(f):p,...v,...m,children:[n&&o.jsx(Se,{visible:y,transitionProps:h&&f?{duration:0}:void 0,...s}),o.jsxs(xe,{radius:c,__hidden:h&&f&&d?f!==h.currentId:!1,children:[x&&o.jsxs(be,{children:[r&&o.jsx(je,{children:r}),a&&o.jsx(ve,{...l})]}),o.jsx(ye,{children:i})]})]})});R.classes=F;R.displayName="@mantine/core/Modal";R.Root=we;R.Overlay=Se;R.Content=xe;R.Body=ye;R.Header=be;R.Title=je;R.CloseButton=ve;R.Stack=zt;const[Nn,Ft]=he("Progress.Root component was not found in tree");var re={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const _n={},ze=_((e,t)=>{const{classNames:r,className:n,style:s,styles:a,vars:l,...i}=N("ProgressLabel",_n,e),c=Ft();return o.jsx(D,{ref:t,...c.getStyles("label",{className:n,style:s,classNames:r,styles:a}),...i})});ze.classes=re;ze.displayName="@mantine/core/ProgressLabel";const Tn={},Rn=Be((e,{size:t,radius:r,transitionDuration:n})=>({root:{"--progress-size":ft(t,"progress-size"),"--progress-radius":r===void 0?void 0:ht(r),"--progress-transition-duration":typeof n=="number"?`${n}ms`:void 0}})),Ce=_((e,t)=>{const r=N("ProgressRoot",Tn,e),{classNames:n,className:s,style:a,styles:l,unstyled:i,vars:c,autoContrast:d,transitionDuration:f,...p}=r,v=Pe({name:"Progress",classes:re,props:r,className:s,style:a,classNames:n,styles:l,unstyled:i,vars:c,varsResolver:Rn});return o.jsx(Nn,{value:{getStyles:v,autoContrast:d},children:o.jsx(D,{ref:t,...v("root"),...p})})});Ce.classes=re;Ce.displayName="@mantine/core/ProgressRoot";const kn={withAria:!0},Ee=_((e,t)=>{const{classNames:r,className:n,style:s,styles:a,vars:l,value:i,withAria:c,color:d,striped:f,animated:p,mod:v,...h}=N("ProgressSection",kn,e),x=Ft(),m=Xt(),y=c?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-valuetext":`${i}%`}:{};return o.jsx(D,{ref:t,...x.getStyles("section",{className:n,classNames:r,styles:a,style:s}),...h,...y,mod:[{striped:f||p,animated:p},v],__vars:{"--progress-section-width":`${i}%`,"--progress-section-color":Qt(d,m),"--progress-label-color":mr(x.autoContrast,m)?Zt({color:d,theme:m,autoContrast:x.autoContrast}):void 0}})});Ee.classes=re;Ee.displayName="@mantine/core/ProgressSection";const Pn={},Z=_((e,t)=>{const r=N("Progress",Pn,e),{value:n,classNames:s,styles:a,vars:l,color:i,striped:c,animated:d,"aria-label":f,...p}=r,{resolvedClassNames:v,resolvedStyles:h}=yt({classNames:s,styles:a,props:r});return o.jsx(Ce,{ref:t,classNames:v,styles:h,vars:l,...p,children:o.jsx(Ee,{value:n,color:i,striped:c,animated:d,"aria-label":f})})});Z.classes=re;Z.displayName="@mantine/core/Progress";Z.Section=Ee;Z.Root=Ce;Z.Label=ze;var Ge=te("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Xe=te("file-export","IconFileExport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),_e=te("file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]),Bn=te("file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]),An=te("info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);const{addons:Ln}=__STORYBOOK_MODULE_PREVIEW_API__,{ImplicitActionsDuringRendering:Dn}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__,{global:Ze}=__STORYBOOK_MODULE_GLOBAL__;var zn=Object.defineProperty,Fn=(e,t)=>{for(var r in t)zn(e,r,{get:t[r],enumerable:!0})},$n="storybook/actions",qn=`${$n}/action-event`,Vn={depth:10,clearOnStoryChange:!0,limit:50},$t=(e,t)=>{let r=Object.getPrototypeOf(e);return!r||t(r)?r:$t(r,t)},Wn=e=>!!(typeof e=="object"&&e&&$t(e,t=>/^Synthetic(?:Base)?Event$/.test(t.constructor.name))&&typeof e.persist=="function"),Jn=e=>{if(Wn(e)){let t=Object.create(e.constructor.prototype,Object.getOwnPropertyDescriptors(e));t.persist();let r=Object.getOwnPropertyDescriptor(t,"view"),n=r==null?void 0:r.value;return typeof n=="object"&&(n==null?void 0:n.constructor.name)==="Window"&&Object.defineProperty(t,"view",{...r,value:Object.create(n.constructor.prototype)}),t}return e},Yn=()=>typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?Yt():Date.now().toString(36)+Math.random().toString(36).substring(2);function q(e,t={}){let r={...Vn,...t},n=function(...s){var p,v;if(t.implicit){let h=(p="__STORYBOOK_PREVIEW__"in Ze?Ze.__STORYBOOK_PREVIEW__:void 0)==null?void 0:p.storyRenders.find(x=>x.phase==="playing"||x.phase==="rendering");if(h){let x=!((v=globalThis==null?void 0:globalThis.FEATURES)!=null&&v.disallowImplicitActionsInRenderV8),m=new Dn({phase:h.phase,name:e,deprecated:x});if(x)console.warn(m);else throw m}}let a=Ln.getChannel(),l=Yn(),i=5,c=s.map(Jn),d=s.length>1?c:c[0],f={id:l,count:0,data:{name:e,args:d},options:{...r,maxDepth:i+(r.depth||3),allowFunction:r.allowFunction||!1}};a.emit(qn,f)};return n.isAction=!0,n.implicit=t.implicit,n}const{definePreview:Eo}=__STORYBOOK_MODULE_PREVIEW_API__,{global:Te}=__STORYBOOK_MODULE_GLOBAL__;var Kn={};Fn(Kn,{argsEnhancers:()=>Gn,loaders:()=>Zn});var qt=(e,t)=>typeof t[e]>"u"&&!(e in t),Un=e=>{let{initialArgs:t,argTypes:r,id:n,parameters:{actions:s}}=e;if(!s||s.disable||!s.argTypesRegex||!r)return{};let a=new RegExp(s.argTypesRegex);return Object.entries(r).filter(([l])=>!!a.test(l)).reduce((l,[i,c])=>(qt(i,t)&&(l[i]=q(i,{implicit:!0,id:n})),l),{})},Hn=e=>{let{initialArgs:t,argTypes:r,parameters:{actions:n}}=e;return n!=null&&n.disable||!r?{}:Object.entries(r).filter(([s,a])=>!!a.action).reduce((s,[a,l])=>(qt(a,t)&&(s[a]=q(typeof l.action=="string"?l.action:a)),s),{})},Gn=[Hn,Un],Qe=!1,Xn=e=>{let{parameters:{actions:t}}=e;if(!(t!=null&&t.disable)&&!Qe&&"__STORYBOOK_TEST_ON_MOCK_CALL__"in Te&&typeof Te.__STORYBOOK_TEST_ON_MOCK_CALL__=="function"){let r=Te.__STORYBOOK_TEST_ON_MOCK_CALL__;r((n,s)=>{let a=n.getMockName();a!=="spy"&&(!/^next\/.*::/.test(a)||["next/router::useRouter()","next/navigation::useRouter()","next/navigation::redirect","next/cache::","next/headers::cookies().set","next/headers::cookies().delete","next/headers::headers().set","next/headers::headers().delete"].some(l=>a.startsWith(l)))&&q(a)(s)}),Qe=!0}},Zn=[Xn];function Qn(e){var r,n;return{metadata:{name:e.name,version:"1.0.0",exportDate:new Date().toISOString(),exportedBy:"Model Editor",description:e.description},entities:e.entities.map(s=>{var a,l,i;return{id:s.id,name:s.name,displayName:s.displayName||s.name,description:s.description,fields:((a=s.fields)==null?void 0:a.map(c=>({id:c.id,name:c.name,type:c.fieldType||c.type,required:c.required||!1,unique:c.unique||!1,defaultValue:c.defaultValue,validation:c.validation,displayName:c.displayName||c.name,description:c.description})))||[],relationships:((l=s.relationships)==null?void 0:l.map(c=>({id:c.id,name:c.name,type:c.type,targetEntity:c.targetEntity,foreignKey:c.foreignKey,description:c.description})))||[],indexes:((i=s.indexes)==null?void 0:i.map(c=>({id:c.id,name:c.name,fields:c.fields,unique:c.unique||!1,type:c.type})))||[]}}),layouts:((r=e.layouts)==null?void 0:r.map(s=>{var a;return{id:s.id,name:s.name,description:s.description,entityId:s.entityId,components:((a=s.components)==null?void 0:a.map(l=>({id:l.id,type:l.type,position:l.position,configuration:l.configuration,validation:l.validation||[]})))||[]}}))||[],customComponents:((n=e.customComponents)==null?void 0:n.map(s=>({id:s.id,name:s.name,type:s.type,definition:s.definition})))||[]}}function et(e,t){const r=JSON.stringify(e,null,2),n=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`${e.metadata.name}-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}function eo(e){const t=[];return!e||typeof e!="object"?(t.push({path:"root",message:"Invalid JSON structure",severity:"error"}),t):(e.metadata?(e.metadata.name||t.push({path:"metadata.name",message:"Model name is required",severity:"error"}),e.metadata.version||t.push({path:"metadata.version",message:"Version is required",severity:"warning"})):t.push({path:"metadata",message:"Missing metadata section",severity:"error"}),Array.isArray(e.entities)?e.entities.forEach((r,n)=>{const s=`entities[${n}]`;r.id||t.push({path:`${s}.id`,message:"Entity ID is required",severity:"error"}),r.name||t.push({path:`${s}.name`,message:"Entity name is required",severity:"error"}),Array.isArray(r.fields)?r.fields.forEach((a,l)=>{const i=`${s}.fields[${l}]`;a.id||t.push({path:`${i}.id`,message:"Field ID is required",severity:"error"}),a.name||t.push({path:`${i}.name`,message:"Field name is required",severity:"error"}),a.type||t.push({path:`${i}.type`,message:"Field type is required",severity:"error"})}):t.push({path:`${s}.fields`,message:"Entity fields must be an array",severity:"warning"}),r.relationships&&!Array.isArray(r.relationships)&&t.push({path:`${s}.relationships`,message:"Relationships must be an array",severity:"warning"})}):t.push({path:"entities",message:"Entities must be an array",severity:"error"}),e.layouts&&!Array.isArray(e.layouts)?t.push({path:"layouts",message:"Layouts must be an array",severity:"warning"}):e.layouts&&e.layouts.forEach((r,n)=>{const s=`layouts[${n}]`;r.id||t.push({path:`${s}.id`,message:"Layout ID is required",severity:"error"}),r.name||t.push({path:`${s}.name`,message:"Layout name is required",severity:"error"}),r.components&&!Array.isArray(r.components)&&t.push({path:`${s}.components`,message:"Layout components must be an array",severity:"warning"})}),t)}function to(e){try{const t=JSON.parse(e),r=eo(t);return r.filter(s=>s.severity==="error").length>0?{success:!1,errors:r}:{success:!0,data:t,errors:r}}catch(t){return{success:!1,errors:[{path:"root",message:`Invalid JSON: ${t instanceof Error?t.message:"Unknown error"}`,severity:"error"}]}}}function ro(e){var t;return{name:e.metadata.name,description:e.metadata.description,entities:e.entities.map(r=>({id:r.id,name:r.name,displayName:r.displayName,description:r.description,fields:r.fields.map(n=>({id:n.id,name:n.name,fieldType:n.type,required:n.required,unique:n.unique,defaultValue:n.defaultValue,validation:n.validation,displayName:n.displayName,description:n.description})),relationships:r.relationships||[],indexes:r.indexes||[]})),layouts:((t=e.layouts)==null?void 0:t.map(r=>({id:r.id,name:r.name,description:r.description,entityId:r.entityId,components:r.components.map(n=>({id:n.id,type:n.type,position:n.position,configuration:n.configuration,validation:n.validation}))})))||[],customComponents:e.customComponents||[]}}const Fe=({opened:e,onClose:t,modelData:r})=>{const[n,s]=u.useState(!0),[a,l]=u.useState(!0),[i,c]=u.useState(!0),[d,f]=u.useState(null),[p,v]=u.useState(!1),h=()=>{const b={...r,layouts:n?r.layouts:[],customComponents:a?r.customComponents:[]},w=Qn(b);f(w),p||(et(w),t())},x=()=>{d&&(et(d),t())},y=(()=>{var M,S,E,g;if(!r)return null;const b=((M=r.entities)==null?void 0:M.length)||0,w=n&&((S=r.layouts)==null?void 0:S.length)||0,I=a&&((E=r.customComponents)==null?void 0:E.length)||0;return{entityCount:b,layoutCount:w,componentCount:I,totalFields:((g=r.entities)==null?void 0:g.reduce((j,O)=>{var T;return j+(((T=O.fields)==null?void 0:T.length)||0)},0))||0}})();return o.jsx(R,{opened:e,onClose:t,title:o.jsxs(L,{children:[o.jsx(Xe,{size:20}),o.jsx(C,{fw:600,children:"Export Model"})]}),size:"lg",children:o.jsxs(B,{gap:"md",children:[o.jsx(C,{size:"sm",color:"dimmed",children:"Export your model as a JSON file that can be imported into another Model Editor instance."}),o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"sm",children:[o.jsx(C,{fw:500,size:"sm",children:"Export Options"}),o.jsx(se,{label:"Include layouts",description:"Export all layout configurations and component arrangements",checked:n,onChange:b=>s(b.currentTarget.checked)}),o.jsx(se,{label:"Include custom components",description:"Export any custom component definitions",checked:a,onChange:b=>l(b.currentTarget.checked)}),o.jsx(se,{label:"Pretty format",description:"Format JSON with indentation for readability",checked:i,onChange:b=>c(b.currentTarget.checked)}),o.jsx(se,{label:"Show preview before download",description:"Review the export data before downloading",checked:p,onChange:b=>v(b.currentTarget.checked)})]})}),y&&o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"xs",children:[o.jsx(C,{fw:500,size:"sm",children:"Export Summary"}),o.jsxs(L,{children:[o.jsxs(k,{variant:"light",color:"blue",children:[y.entityCount," entities"]}),o.jsxs(k,{variant:"light",color:"green",children:[y.totalFields," fields"]}),n&&o.jsxs(k,{variant:"light",color:"orange",children:[y.layoutCount," layouts"]}),a&&o.jsxs(k,{variant:"light",color:"purple",children:[y.componentCount," custom components"]})]})]})}),p&&d&&o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"sm",children:[o.jsxs(L,{children:[o.jsx(C,{fw:500,size:"sm",children:"Export Preview"}),o.jsxs(k,{variant:"light",color:"green",children:[o.jsx(wt,{size:12}),"Ready"]})]}),o.jsx(St,{value:JSON.stringify(d,null,i?2:0),readOnly:!0,rows:10,style:{fontFamily:"monospace",fontSize:"12px"}}),o.jsxs(C,{size:"xs",color:"dimmed",children:["File size: ~",new Blob([JSON.stringify(d)]).size," bytes"]})]})}),o.jsx(me,{icon:o.jsx(An,{size:16}),color:"blue",variant:"light",children:o.jsx(C,{size:"sm",children:"The exported file contains all model structure, relationships, and configurations. Sensitive data like actual records is not included."})}),o.jsxs(L,{justify:"flex-end",gap:"sm",children:[o.jsx(Q,{variant:"subtle",onClick:t,children:"Cancel"}),p&&d?o.jsx(Q,{leftSection:o.jsx(dr,{size:16}),onClick:x,color:"green",children:"Download File"}):o.jsx(Q,{leftSection:o.jsx(Xe,{size:16}),onClick:h,children:p?"Generate Preview":"Export & Download"})]})]})})};Fe.__docgenInfo={description:"",methods:[],displayName:"ModelExportDialog",props:{opened:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},modelData:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  name: string;
  description?: string;
  entities: any[];
  layouts?: any[];
  customComponents?: any[];
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"entities",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!0}},{key:"layouts",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!1}},{key:"customComponents",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!1}}]}},description:""}}};const $e=({opened:e,onClose:t,onImport:r,isReplacing:n=!1,existingModelName:s})=>{const[a,l]=u.useState("file"),[i,c]=u.useState(""),[d,f]=u.useState(null),[p,v]=u.useState(null),[h,x]=u.useState(!1),m=u.useCallback(g=>{if(!g.trim()){v(null);return}x(!0),setTimeout(()=>{const j=to(g);v(j),x(!1)},300)},[]),y=u.useCallback(g=>{if(f(g),g){const j=new FileReader;j.onload=O=>{var $;const T=($=O.target)==null?void 0:$.result;c(T),m(T)},j.readAsText(g)}else c(""),v(null)},[m]),b=u.useCallback(g=>{c(g),f(null),m(g)},[m]),w=()=>{if(!(p!=null&&p.success)||!p.data)return;const g=ro(p.data);r(g,i),t()},I=()=>{if(!p)return null;const g=p.errors.filter(O=>O.severity==="error"),j=p.errors.filter(O=>O.severity==="warning");return{hasErrors:g.length>0,hasWarnings:j.length>0,errorCount:g.length,warningCount:j.length,canImport:p.success&&g.length===0}},M=()=>{var j,O;if(!(p!=null&&p.data))return null;const g=p.data;return{name:g.metadata.name,entityCount:g.entities.length,layoutCount:((j=g.layouts)==null?void 0:j.length)||0,componentCount:((O=g.customComponents)==null?void 0:O.length)||0,totalFields:g.entities.reduce((T,$)=>T+$.fields.length,0)}},S=I(),E=M();return o.jsx(R,{opened:e,onClose:t,title:o.jsxs(L,{children:[o.jsx(_e,{size:20}),o.jsx(C,{fw:600,children:"Import Model"})]}),size:"xl",children:o.jsxs(B,{gap:"md",children:[o.jsx(C,{size:"sm",color:"dimmed",children:n?`Import a model from a JSON file. This will replace the existing model "${s}".`:"Import a model from a JSON file exported from Model Editor."}),o.jsxs(J,{value:a,onChange:l,children:[o.jsxs(J.List,{children:[o.jsx(J.Tab,{value:"file",leftSection:o.jsx(Bn,{size:16}),children:"Upload File"}),o.jsx(J.Tab,{value:"text",leftSection:o.jsx(_e,{size:16}),children:"Paste JSON"})]}),o.jsx(J.Panel,{value:"file",pt:"md",children:o.jsxs(B,{gap:"sm",children:[o.jsx(un,{label:"Select JSON file",placeholder:"Choose a model export file...",accept:".json",value:d,onChange:y,leftSection:o.jsx(ur,{size:16}),rightSection:d&&o.jsx(fr,{label:"Clear file",children:o.jsx(pr,{variant:"subtle",color:"red",onClick:()=>y(null),children:o.jsx(hr,{size:16})})})}),d&&o.jsxs(C,{size:"xs",color:"dimmed",children:["File: ",d.name," (",d.size," bytes)"]})]})}),o.jsx(J.Panel,{value:"text",pt:"md",children:o.jsx(B,{gap:"sm",children:o.jsx(St,{label:"JSON Content",placeholder:"Paste your exported model JSON here...",value:i,onChange:g=>b(g.currentTarget.value),rows:8,style:{fontFamily:"monospace"}})})})]}),h&&o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"xs",children:[o.jsx(C,{size:"sm",children:"Validating model data..."}),o.jsx(Z,{value:100,animated:!0})]})}),S&&o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"sm",children:[o.jsxs(L,{children:[o.jsx(C,{fw:500,size:"sm",children:"Validation Results"}),S.canImport?o.jsx(k,{color:"green",leftSection:o.jsx(wt,{size:12}),children:"Valid"}):o.jsx(k,{color:"red",leftSection:o.jsx(We,{size:12}),children:"Invalid"})]}),S.hasErrors&&o.jsxs(me,{color:"red",icon:o.jsx(We,{size:16}),children:[o.jsxs(C,{size:"sm",fw:500,children:[S.errorCount," error(s) found"]}),o.jsx(V,{size:"sm",mt:"xs",children:p==null?void 0:p.errors.filter(g=>g.severity==="error").map((g,j)=>o.jsx(V.Item,{children:o.jsxs(C,{size:"sm",children:[o.jsxs(C,{span:!0,fw:500,children:[g.path,":"]})," ",g.message]})},j))})]}),S.hasWarnings&&o.jsxs(me,{color:"yellow",icon:o.jsx(Ge,{size:16}),children:[o.jsxs(C,{size:"sm",fw:500,children:[S.warningCount," warning(s)"]}),o.jsx(V,{size:"sm",mt:"xs",children:p==null?void 0:p.errors.filter(g=>g.severity==="warning").map((g,j)=>o.jsx(V.Item,{children:o.jsxs(C,{size:"sm",children:[o.jsxs(C,{span:!0,fw:500,children:[g.path,":"]})," ",g.message]})},j))})]})]})}),E&&(S==null?void 0:S.canImport)&&o.jsx(W,{p:"md",withBorder:!0,children:o.jsxs(B,{gap:"sm",children:[o.jsx(C,{fw:500,size:"sm",children:"Model Summary"}),o.jsxs(L,{children:[o.jsx(C,{size:"sm",fw:500,children:"Name:"}),o.jsx(C,{size:"sm",children:E.name})]}),o.jsxs(L,{children:[o.jsxs(k,{variant:"light",color:"blue",children:[E.entityCount," entities"]}),o.jsxs(k,{variant:"light",color:"green",children:[E.totalFields," fields"]}),E.layoutCount>0&&o.jsxs(k,{variant:"light",color:"orange",children:[E.layoutCount," layouts"]}),E.componentCount>0&&o.jsxs(k,{variant:"light",color:"purple",children:[E.componentCount," custom components"]})]})]})}),(S==null?void 0:S.canImport)&&o.jsx(me,{icon:o.jsx(Ge,{size:16}),color:n?"red":"orange",variant:"light",children:o.jsxs(C,{size:"sm",children:[o.jsx(C,{span:!0,fw:500,children:"Warning:"})," ",n?`This will completely replace the existing model "${s}" and all its data. This action cannot be undone.`:"Importing will replace the current model data. Make sure to export your current work if you want to keep it."]})}),o.jsxs(L,{justify:"flex-end",gap:"sm",children:[o.jsx(Q,{variant:"subtle",onClick:t,children:"Cancel"}),o.jsx(Q,{leftSection:o.jsx(_e,{size:16}),onClick:w,disabled:!(S!=null&&S.canImport),color:n?"red":"blue",children:n?"Replace Model":"Import Model"})]})]})})};$e.__docgenInfo={description:"",methods:[],displayName:"ModelImportDialog",props:{opened:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onImport:{required:!0,tsType:{name:"signature",type:"function",raw:"(modelData: any, originalJsonString: string) => void",signature:{arguments:[{type:{name:"any"},name:"modelData"},{type:{name:"string"},name:"originalJsonString"}],return:{name:"void"}}},description:""},isReplacing:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},existingModelName:{required:!1,tsType:{name:"string"},description:""}}};const Io={title:"Model Editor/Import Export",component:Fe,parameters:{layout:"centered"},tags:["autodocs"]},Vt={name:"Customer Order Management",description:"A comprehensive model for managing customer orders and inventory",entities:[{id:"customer",name:"Customer",displayName:"Customer",description:"Customer information",fields:[{id:"id",name:"id",type:"uuid",required:!0,unique:!0,displayName:"ID"},{id:"firstName",name:"firstName",type:"string",required:!0,displayName:"First Name"},{id:"lastName",name:"lastName",type:"string",required:!0,displayName:"Last Name"},{id:"email",name:"email",type:"email",required:!0,unique:!0,displayName:"Email"}],relationships:[{id:"customer-orders",name:"orders",type:"one-to-many",targetEntity:"order"}]},{id:"order",name:"Order",displayName:"Order",description:"Customer order information",fields:[{id:"id",name:"id",type:"uuid",required:!0,unique:!0,displayName:"ID"},{id:"customerId",name:"customerId",type:"uuid",required:!0,displayName:"Customer ID"},{id:"orderDate",name:"orderDate",type:"datetime",required:!0,displayName:"Order Date"},{id:"total",name:"total",type:"decimal",required:!0,displayName:"Total Amount"}]}],layouts:[{id:"customer-list",name:"Customer List",description:"Grid view of customers",entityId:"customer",components:[{id:"customer-grid",type:"DataGrid",position:{row:0,column:0,rowSpan:6,colSpan:12},configuration:{dataGrid:{entityId:"customer",columns:[{fieldId:"firstName",label:"First Name",width:150},{fieldId:"lastName",label:"Last Name",width:150},{fieldId:"email",label:"Email",width:200}],pagination:{enabled:!0,pageSize:25},filtering:{enabled:!0},sorting:{enabled:!0}}},validation:[]}]}],customComponents:[]},le={args:{opened:!0,onClose:q("close"),modelData:Vt}},ce={args:{opened:!0,onClose:q("close"),modelData:{name:"Empty Model",description:"A model with no entities",entities:[],layouts:[],customComponents:[]}}},de={args:{opened:!0,onClose:q("close"),onImport:q("import")},render:e=>o.jsx($e,{...e})},ue={render:()=>{const[e,t]=Ve.useState(!1),[r,n]=Ve.useState(!1);return o.jsxs("div",{style:{padding:"20px"},children:[o.jsx("h3",{children:"Model Import/Export Workflow"}),o.jsx("p",{children:"This demonstrates the complete import/export functionality:"}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("button",{onClick:()=>t(!0),style:{marginRight:"10px",padding:"10px 20px",backgroundColor:"#4dabf7",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Open Export Dialog"}),o.jsx("button",{onClick:()=>n(!0),style:{padding:"10px 20px",backgroundColor:"#51cf66",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Open Import Dialog"})]}),o.jsx(Fe,{opened:e,onClose:()=>t(!1),modelData:Vt}),o.jsx($e,{opened:r,onClose:()=>n(!1),onImport:s=>{q("import")(s),n(!1)}}),o.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",marginTop:"20px"},children:[o.jsx("h4",{children:"Features Demonstrated:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Export model with configurable options"}),o.jsx("li",{children:"JSON validation and preview"}),o.jsx("li",{children:"Import from file or paste JSON"}),o.jsx("li",{children:"Comprehensive validation with error reporting"}),o.jsx("li",{children:"Model summary and statistics"}),o.jsx("li",{children:"Warning alerts for destructive operations"})]})]})]})}};var tt,rt,nt;le.parameters={...le.parameters,docs:{...(tt=le.parameters)==null?void 0:tt.docs,source:{originalSource:`{
  args: {
    opened: true,
    onClose: action('close'),
    modelData: sampleModelData
  }
}`,...(nt=(rt=le.parameters)==null?void 0:rt.docs)==null?void 0:nt.source}}};var ot,st,at;ce.parameters={...ce.parameters,docs:{...(ot=ce.parameters)==null?void 0:ot.docs,source:{originalSource:`{
  args: {
    opened: true,
    onClose: action('close'),
    modelData: {
      name: 'Empty Model',
      description: 'A model with no entities',
      entities: [],
      layouts: [],
      customComponents: []
    }
  }
}`,...(at=(st=ce.parameters)==null?void 0:st.docs)==null?void 0:at.source}}};var it,lt,ct;de.parameters={...de.parameters,docs:{...(it=de.parameters)==null?void 0:it.docs,source:{originalSource:`{
  args: {
    opened: true,
    onClose: action('close'),
    onImport: action('import')
  },
  render: args => <ModelImportDialog {...args} />
}`,...(ct=(lt=de.parameters)==null?void 0:lt.docs)==null?void 0:ct.source}}};var dt,ut,mt;ue.parameters={...ue.parameters,docs:{...(dt=ue.parameters)==null?void 0:dt.docs,source:{originalSource:`{
  render: () => {
    const [exportOpen, setExportOpen] = React.useState(false);
    const [importOpen, setImportOpen] = React.useState(false);
    return <div style={{
      padding: '20px'
    }}>
        <h3>Model Import/Export Workflow</h3>
        <p>This demonstrates the complete import/export functionality:</p>
        
        <div style={{
        marginBottom: '20px'
      }}>
          <button onClick={() => setExportOpen(true)} style={{
          marginRight: '10px',
          padding: '10px 20px',
          backgroundColor: '#4dabf7',
          color: 'white',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer'
        }}>
            Open Export Dialog
          </button>
          
          <button onClick={() => setImportOpen(true)} style={{
          padding: '10px 20px',
          backgroundColor: '#51cf66',
          color: 'white',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer'
        }}>
            Open Import Dialog
          </button>
        </div>

        <ModelExportDialog opened={exportOpen} onClose={() => setExportOpen(false)} modelData={sampleModelData} />

        <ModelImportDialog opened={importOpen} onClose={() => setImportOpen(false)} onImport={data => {
        action('import')(data);
        setImportOpen(false);
      }} />

        <div style={{
        backgroundColor: '#f8f9fa',
        padding: '15px',
        borderRadius: '4px',
        marginTop: '20px'
      }}>
          <h4>Features Demonstrated:</h4>
          <ul>
            <li>Export model with configurable options</li>
            <li>JSON validation and preview</li>
            <li>Import from file or paste JSON</li>
            <li>Comprehensive validation with error reporting</li>
            <li>Model summary and statistics</li>
            <li>Warning alerts for destructive operations</li>
          </ul>
        </div>
      </div>;
  }
}`,...(mt=(ut=ue.parameters)==null?void 0:ut.docs)==null?void 0:mt.source}}};const Mo=["ExportDialog","ExportDialogEmpty","ImportDialog","ImportExportWorkflow"];export{le as ExportDialog,ce as ExportDialogEmpty,de as ImportDialog,ue as ImportExportWorkflow,Mo as __namedExportsOrder,Io as default};
