import{j as a}from"./jsx-runtime-CDt2p4po.js";import{r as R,R as Y}from"./index-GiUgBvb1.js";import{v as U}from"./v4-CtRu48qb.js";import{C as L}from"./Card-Cdu5HIUj.js";import{S as z}from"./Stack-BdVTzV5n.js";import{I as O,a as X,C as T}from"./IconSettings-D4Y479Cq.js";import{T as I,G as h}from"./Text-DRIe2lk6.js";import{B as V}from"./Badge-DlnNQPvo.js";import{S as ee}from"./InputBase-qatfRSiM.js";import{A as ae,T as A}from"./Tabs-DIZ0DkZF.js";import{c as W}from"./createReactComponent-DeW0SWsj.js";import{I as _}from"./IconDatabase-BwcsqcPj.js";import{I as se,A as M,a as Z}from"./IconX-DFCRbXwC.js";import{B}from"./Button-DxGj0eyG.js";import{N as D,S as q}from"./Select-ONZWQqDe.js";import{D as H,T as E}from"./TextInput-CTL6muRQ.js";var le=W("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),$=W("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),J=W("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),ie=W("palette","IconPalette",[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]]);function K(){return U()}const te=({component:e,onUpdate:i})=>{var d,j,b;const x=(u,g)=>{({...e.position},i({...e.configuration}))},t=(u,g)=>{const w={...e.configuration.styling,[u]:g};i({...e.configuration,styling:w})};return a.jsxs(z,{gap:"md",children:[a.jsxs(z,{gap:"xs",children:[a.jsx(I,{size:"sm",fw:500,children:"Position & Size"}),a.jsxs(h,{grow:!0,children:[a.jsx(D,{label:"Row",value:e.position.row,onChange:u=>x(),min:0,max:11,size:"xs"}),a.jsx(D,{label:"Column",value:e.position.column,onChange:u=>x(),min:0,max:11,size:"xs"})]}),a.jsxs(h,{grow:!0,children:[a.jsx(D,{label:"Height (rows)",value:e.position.rowSpan,onChange:u=>x(),min:1,max:12,size:"xs"}),a.jsx(D,{label:"Width (cols)",value:e.position.colSpan,onChange:u=>x(),min:1,max:12,size:"xs"})]})]}),a.jsx(H,{}),a.jsxs(z,{gap:"xs",children:[a.jsx(I,{size:"sm",fw:500,children:"Styling"}),a.jsx(E,{label:"Background Color",placeholder:"#ffffff",value:((d=e.configuration.styling)==null?void 0:d.backgroundColor)||"",onChange:u=>t("backgroundColor",u.currentTarget.value),size:"xs"}),a.jsxs(h,{grow:!0,children:[a.jsx(E,{label:"Padding",placeholder:"8px",value:((j=e.configuration.styling)==null?void 0:j.padding)||"",onChange:u=>t("padding",u.currentTarget.value),size:"xs"}),a.jsx(E,{label:"Border Radius",placeholder:"4px",value:((b=e.configuration.styling)==null?void 0:b.borderRadius)||"",onChange:u=>t("borderRadius",u.currentTarget.value),size:"xs"})]})]})]})},re=({component:e,onUpdate:i,entities:x})=>{var n,P;const[t,d]=R.useState(((n=e.configuration.dataGrid)==null?void 0:n.entityId)||""),j=x.find(s=>s.id===t),b=(j==null?void 0:j.fields)||[],u=s=>{var o,y,m,v;d(s);const l={...e.configuration,dataGrid:{entityId:s,columns:[],pagination:((o=e.configuration.dataGrid)==null?void 0:o.pagination)||{enabled:!0,pageSize:25},filtering:((y=e.configuration.dataGrid)==null?void 0:y.filtering)||{enabled:!0},sorting:((m=e.configuration.dataGrid)==null?void 0:m.sorting)||{enabled:!0},actions:((v=e.configuration.dataGrid)==null?void 0:v.actions)||[]}};i(l)},g=s=>{var v,C,p,f,S,F;const l=b.find(N=>N.id===s);if(!l)return;const o={id:K(),fieldId:l.id,label:l.displayName||l.name,type:((v=l.fieldType)==null?void 0:v.type)||"string",sortable:!0,filterable:!0,width:"auto",alignment:"left"},y=((C=e.configuration.dataGrid)==null?void 0:C.columns)||[],m={...e.configuration,dataGrid:{...e.configuration.dataGrid,entityId:t,columns:[...y,o],pagination:((p=e.configuration.dataGrid)==null?void 0:p.pagination)||{enabled:!0,pageSize:25},filtering:((f=e.configuration.dataGrid)==null?void 0:f.filtering)||{enabled:!0},sorting:((S=e.configuration.dataGrid)==null?void 0:S.sorting)||{enabled:!0},actions:((F=e.configuration.dataGrid)==null?void 0:F.actions)||[]}};i(m)},w=s=>{var y,m,v,C,p,f;const l=((y=e.configuration.dataGrid)==null?void 0:y.columns)||[],o={...e.configuration,dataGrid:{entityId:((m=e.configuration.dataGrid)==null?void 0:m.entityId)||t,columns:l.filter(S=>S.id!==s),pagination:((v=e.configuration.dataGrid)==null?void 0:v.pagination)||{enabled:!0,pageSize:25},filtering:((C=e.configuration.dataGrid)==null?void 0:C.filtering)||{enabled:!0},sorting:((p=e.configuration.dataGrid)==null?void 0:p.sorting)||{enabled:!0},actions:((f=e.configuration.dataGrid)==null?void 0:f.actions)||[]}};i(o)},k=(s,l)=>{var m,v,C,p,f,S;const o=((m=e.configuration.dataGrid)==null?void 0:m.columns)||[],y={...e.configuration,dataGrid:{entityId:((v=e.configuration.dataGrid)==null?void 0:v.entityId)||t,columns:o.map(F=>F.id===s?{...F,...l}:F),pagination:((C=e.configuration.dataGrid)==null?void 0:C.pagination)||{enabled:!0,pageSize:25},filtering:((p=e.configuration.dataGrid)==null?void 0:p.filtering)||{enabled:!0},sorting:((f=e.configuration.dataGrid)==null?void 0:f.sorting)||{enabled:!0},actions:((S=e.configuration.dataGrid)==null?void 0:S.actions)||[]}};i(y)},c=(s,l)=>{var v,C,p,f,S,F;const o=[...((v=e.configuration.dataGrid)==null?void 0:v.columns)||[]],[y]=o.splice(s,1);o.splice(l,0,y);const m={...e.configuration,dataGrid:{entityId:((C=e.configuration.dataGrid)==null?void 0:C.entityId)||t,columns:o,pagination:((p=e.configuration.dataGrid)==null?void 0:p.pagination)||{enabled:!0,pageSize:25},filtering:((f=e.configuration.dataGrid)==null?void 0:f.filtering)||{enabled:!0},sorting:((S=e.configuration.dataGrid)==null?void 0:S.sorting)||{enabled:!0},actions:((F=e.configuration.dataGrid)==null?void 0:F.actions)||[]}};i(m)},G=s=>{const l={...e.configuration,dataGrid:{...e.configuration.dataGrid,...s}};i(l)},r=((P=e.configuration.dataGrid)==null?void 0:P.columns)||[];return a.jsxs(z,{gap:"md",children:[a.jsx(q,{label:"Entity",placeholder:"Select an entity",value:t,onChange:s=>s&&u(s),data:x.map(s=>({value:s.id,label:`${s.displayName} (${s.name})`})),"data-testid":"datagrid-entity-select"}),t&&a.jsxs(a.Fragment,{children:[a.jsxs(z,{gap:"xs",children:[a.jsx(I,{size:"sm",fw:500,children:"Available Fields"}),a.jsx(h,{gap:"xs",children:b.map(s=>a.jsx(B,{variant:"light",size:"xs",onClick:()=>g(s.id),disabled:r.some(l=>l.fieldId===s.id),"data-testid":`add-column-${s.name}`,children:s.displayName||s.name},s.id))})]}),r.length>0&&a.jsxs(z,{gap:"xs",children:[a.jsxs(I,{size:"sm",fw:500,children:["Columns (",r.length,")"]}),r.map((s,l)=>a.jsx(ne,{column:s,index:l,totalColumns:r.length,onUpdate:o=>k(s.id,o),onRemove:()=>w(s.id),onMove:c},s.id))]}),a.jsx(H,{}),a.jsx(de,{configuration:e.configuration.dataGrid,onUpdate:G})]})]})};function ne({column:e,index:i,totalColumns:x,onUpdate:t,onRemove:d,onMove:j}){const[b,u]=R.useState(!1);return a.jsx(L,{withBorder:!0,p:"xs","data-testid":`column-config-${e.fieldId}`,children:a.jsxs(z,{gap:"xs",children:[a.jsxs(h,{justify:"space-between",children:[a.jsxs(h,{gap:"xs",children:[a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>u(!b),children:b?a.jsx($,{size:14}):a.jsx(X,{size:14})}),a.jsx(I,{size:"sm",fw:500,children:e.label}),a.jsx(V,{size:"xs",variant:"light",children:e.type})]}),a.jsxs(h,{gap:"xs",children:[a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>j(i,Math.max(0,i-1)),disabled:i===0,children:a.jsx(J,{size:14})}),a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>j(i,Math.min(x-1,i+1)),disabled:i===x-1,children:a.jsx($,{size:14})}),a.jsx(M,{color:"red",variant:"subtle",size:"sm",onClick:d,children:a.jsx(Z,{size:14})})]})]}),b&&a.jsxs(z,{gap:"xs",pl:"lg",children:[a.jsx(E,{label:"Display Label",value:e.label,onChange:g=>t({label:g.target.value}),size:"xs"}),a.jsxs(h,{grow:!0,children:[a.jsx(q,{label:"Alignment",value:e.alignment,onChange:g=>t({alignment:g}),data:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}],size:"xs"}),a.jsx(E,{label:"Width",value:e.width,onChange:g=>t({width:g.target.value}),placeholder:"auto, 150px, 20%",size:"xs"})]}),a.jsxs(h,{children:[a.jsx(T,{label:"Sortable",checked:e.sortable,onChange:g=>t({sortable:g.target.checked}),size:"xs"}),a.jsx(T,{label:"Filterable",checked:e.filterable,onChange:g=>t({filterable:g.target.checked}),size:"xs"})]})]})]})})}function de({configuration:e,onUpdate:i}){var d,j,b,u,g,w,k;const[x,t]=R.useState(!1);return a.jsxs(z,{gap:"xs",children:[a.jsxs(h,{justify:"space-between",children:[a.jsx(I,{size:"sm",fw:500,children:"DataGrid Settings"}),a.jsx(B,{variant:"subtle",size:"xs",onClick:()=>t(!x),children:x?"Hide Advanced":"Show Advanced"})]}),a.jsxs(h,{children:[a.jsx(T,{label:"Enable Pagination",checked:((d=e==null?void 0:e.pagination)==null?void 0:d.enabled)??!0,onChange:c=>i({pagination:{...e==null?void 0:e.pagination,enabled:c.target.checked}})}),a.jsx(T,{label:"Enable Filtering",checked:((j=e==null?void 0:e.filtering)==null?void 0:j.enabled)??!0,onChange:c=>i({filtering:{...e==null?void 0:e.filtering,enabled:c.target.checked}})}),a.jsx(T,{label:"Enable Sorting",checked:((b=e==null?void 0:e.sorting)==null?void 0:b.enabled)??!0,onChange:c=>i({sorting:{...e==null?void 0:e.sorting,enabled:c.target.checked}})})]}),((u=e==null?void 0:e.pagination)==null?void 0:u.enabled)&&a.jsx(q,{label:"Page Size",value:((g=e.pagination.pageSize)==null?void 0:g.toString())||"25",onChange:c=>i({pagination:{...e.pagination,pageSize:parseInt(c||"25")}}),data:[{value:"10",label:"10 items"},{value:"25",label:"25 items"},{value:"50",label:"50 items"},{value:"100",label:"100 items"}],size:"xs"}),x&&a.jsxs(z,{gap:"xs",p:"xs",bg:"gray.0",children:[a.jsx(I,{size:"xs",fw:500,color:"dimmed",children:"Advanced Settings"}),a.jsxs(h,{children:[a.jsx(T,{label:"Row Selection",checked:((w=e==null?void 0:e.selection)==null?void 0:w.enabled)??!1,onChange:c=>i({selection:{...e==null?void 0:e.selection,enabled:c.target.checked}}),size:"xs"}),a.jsx(T,{label:"Row Highlighting",checked:((k=e==null?void 0:e.highlighting)==null?void 0:k.enabled)??!1,onChange:c=>i({highlighting:{...e==null?void 0:e.highlighting,enabled:c.target.checked}}),size:"xs"})]}),a.jsx(q,{label:"Density",value:(e==null?void 0:e.density)||"normal",onChange:c=>i({density:c}),data:[{value:"compact",label:"Compact"},{value:"normal",label:"Normal"},{value:"comfortable",label:"Comfortable"}],size:"xs"})]})]})}const ue=({component:e,onUpdate:i,entities:x})=>{var n,P;const[t,d]=R.useState(((n=e.configuration.form)==null?void 0:n.entityId)||""),j=x.find(s=>s.id===t),b=(j==null?void 0:j.fields)||[],u=s=>{var o,y,m;d(s);const l={...e.configuration,form:{entityId:s,fields:[],validation:((o=e.configuration.form)==null?void 0:o.validation)||{clientSide:!0,serverSide:!0,realTime:!0},layout:((y=e.configuration.form)==null?void 0:y.layout)||"single-column",submission:((m=e.configuration.form)==null?void 0:m.submission)||{action:"create"}}};i(l)},g=s=>{var p,f,S,F,N;const l=b.find(Q=>Q.id===s);if(!l)return;const o=((p=l.fieldType)==null?void 0:p.type)||"string",y=ce(o),m={id:K(),fieldId:l.id,label:l.displayName||l.name,type:y,required:l.required||!1,placeholder:"",helpText:"",validation:[],colSpan:12},v=((f=e.configuration.form)==null?void 0:f.fields)||[],C={...e.configuration,form:{...e.configuration.form,entityId:t,fields:[...v,m],validation:((S=e.configuration.form)==null?void 0:S.validation)||{clientSide:!0,serverSide:!0,realTime:!0},layout:((F=e.configuration.form)==null?void 0:F.layout)||"single-column",submission:((N=e.configuration.form)==null?void 0:N.submission)||{action:"create"}}};i(C)},w=s=>{var y,m,v,C,p;const l=((y=e.configuration.form)==null?void 0:y.fields)||[],o={...e.configuration,form:{entityId:((m=e.configuration.form)==null?void 0:m.entityId)||t,fields:l.filter(f=>f.id!==s),validation:((v=e.configuration.form)==null?void 0:v.validation)||{clientSide:!0,serverSide:!0,realTime:!0},layout:((C=e.configuration.form)==null?void 0:C.layout)||"single-column",submission:((p=e.configuration.form)==null?void 0:p.submission)||{action:"create"}}};i(o)},k=(s,l)=>{var m,v,C,p,f;const o=((m=e.configuration.form)==null?void 0:m.fields)||[],y={...e.configuration,form:{entityId:((v=e.configuration.form)==null?void 0:v.entityId)||t,fields:o.map(S=>S.id===s?{...S,...l}:S),validation:((C=e.configuration.form)==null?void 0:C.validation)||{clientSide:!0,serverSide:!0,realTime:!0},layout:((p=e.configuration.form)==null?void 0:p.layout)||"single-column",submission:((f=e.configuration.form)==null?void 0:f.submission)||{action:"create"}}};i(y)},c=(s,l)=>{var v,C,p,f,S;const o=[...((v=e.configuration.form)==null?void 0:v.fields)||[]],[y]=o.splice(s,1);o.splice(l,0,y);const m={...e.configuration,form:{entityId:((C=e.configuration.form)==null?void 0:C.entityId)||t,fields:o,validation:((p=e.configuration.form)==null?void 0:p.validation)||{clientSide:!0,serverSide:!0,realTime:!0},layout:((f=e.configuration.form)==null?void 0:f.layout)||"single-column",submission:((S=e.configuration.form)==null?void 0:S.submission)||{action:"create"}}};i(m)},G=s=>{const l={...e.configuration,form:{...e.configuration.form,...s}};i(l)},r=((P=e.configuration.form)==null?void 0:P.fields)||[];return a.jsxs(z,{gap:"md",children:[a.jsx(q,{label:"Entity",placeholder:"Select an entity",value:t,onChange:s=>s&&u(s),data:x.map(s=>({value:s.id,label:`${s.displayName} (${s.name})`})),"data-testid":"form-entity-select"}),t&&a.jsxs(a.Fragment,{children:[a.jsxs(z,{gap:"xs",children:[a.jsx(I,{size:"sm",fw:500,children:"Available Fields"}),a.jsx(h,{gap:"xs",children:b.map(s=>a.jsx(B,{variant:"light",size:"xs",onClick:()=>g(s.id),disabled:r.some(l=>l.fieldId===s.id),"data-testid":`add-field-${s.name}`,children:s.displayName||s.name},s.id))})]}),r.length>0&&a.jsxs(z,{gap:"xs",children:[a.jsxs(I,{size:"sm",fw:500,children:["Form Fields (",r.length,")"]}),r.map((s,l)=>a.jsx(oe,{field:s,index:l,totalFields:r.length,availableFields:b,onUpdate:o=>k(s.id,o),onRemove:()=>w(s.id),onMove:c},s.id))]}),a.jsx(H,{}),a.jsx(xe,{configuration:e.configuration.form,onUpdate:G})]})]})};function ce(e){switch(e){case"String":return"text";case"Int":return"number";case"Float":return"number";case"Boolean":return"checkbox";case"DateTime":return"datetime-local";case"Date":return"date";case"Time":return"time";case"Email":return"email";case"Phone":return"tel";case"URL":return"url";case"Password":return"password";case"Enum":return"select";case"Text":return"textarea";default:return"text"}}function oe({field:e,index:i,totalFields:x,availableFields:t,onUpdate:d,onRemove:j,onMove:b}){var c,G,r,n,P,s;const[u,g]=R.useState(!1),w=t.find(l=>l.id===e.fieldId),k=((c=w==null?void 0:w.fieldType)==null?void 0:c.type)||"String";return a.jsx(L,{withBorder:!0,p:"xs","data-testid":`form-field-config-${e.fieldId}`,children:a.jsxs(z,{gap:"xs",children:[a.jsxs(h,{justify:"space-between",children:[a.jsxs(h,{gap:"xs",children:[a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>g(!u),children:u?a.jsx($,{size:14}):a.jsx(X,{size:14})}),a.jsx(I,{size:"sm",fw:500,children:e.label}),a.jsx(V,{size:"xs",variant:"light",children:e.inputType}),e.required&&a.jsx(V,{size:"xs",color:"red",variant:"light",children:"Required"})]}),a.jsxs(h,{gap:"xs",children:[a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>b(i,Math.max(0,i-1)),disabled:i===0,children:a.jsx(J,{size:14})}),a.jsx(M,{variant:"subtle",size:"sm",onClick:()=>b(i,Math.min(x-1,i+1)),disabled:i===x-1,children:a.jsx($,{size:14})}),a.jsx(M,{color:"red",variant:"subtle",size:"sm",onClick:j,children:a.jsx(Z,{size:14})})]})]}),u&&a.jsxs(z,{gap:"xs",pl:"lg",children:[a.jsxs(h,{grow:!0,children:[a.jsx(E,{label:"Display Label",value:e.label,onChange:l=>d({label:l.target.value}),size:"xs"}),a.jsx(q,{label:"Input Type",value:e.inputType,onChange:l=>d({inputType:l}),data:he(k),size:"xs"})]}),a.jsxs(h,{grow:!0,children:[a.jsx(E,{label:"Placeholder",value:e.placeholder||"",onChange:l=>d({placeholder:l.target.value}),size:"xs"}),a.jsx(D,{label:"Width (columns)",value:e.colSpan||12,onChange:l=>d({colSpan:typeof l=="number"?l:12}),min:1,max:12,size:"xs"})]}),a.jsx(E,{label:"Help Text",value:e.helpText||"",onChange:l=>d({helpText:l.target.value}),size:"xs"}),a.jsx(h,{children:a.jsx(T,{label:"Required",checked:e.required,onChange:l=>d({required:l.target.checked,validation:{...e.validation,required:l.target.checked}}),size:"xs"})}),k==="String"&&a.jsxs(h,{grow:!0,children:[a.jsx(D,{label:"Min Length",value:((G=e.validation)==null?void 0:G.minLength)||0,onChange:l=>d({validation:{...e.validation,minLength:l||0}}),min:0,size:"xs"}),a.jsx(D,{label:"Max Length",value:((r=e.validation)==null?void 0:r.maxLength)||255,onChange:l=>d({validation:{...e.validation,maxLength:l||255}}),min:1,size:"xs"})]}),["Int","Float"].includes(k)&&a.jsxs(h,{grow:!0,children:[a.jsx(D,{label:"Min Value",value:(n=e.validation)==null?void 0:n.min,onChange:l=>d({validation:{...e.validation,min:l}}),size:"xs"}),a.jsx(D,{label:"Max Value",value:(P=e.validation)==null?void 0:P.max,onChange:l=>d({validation:{...e.validation,max:l}}),size:"xs"})]}),k==="String"&&a.jsx(E,{label:"Pattern (RegEx)",value:((s=e.validation)==null?void 0:s.pattern)||"",onChange:l=>d({validation:{...e.validation,pattern:l.target.value||void 0}}),placeholder:"^[a-zA-Z0-9]+$",size:"xs"})]})]})})}function he(e){const i=[{value:"text",label:"Text Input"},{value:"textarea",label:"Text Area"},{value:"select",label:"Select Dropdown"},{value:"checkbox",label:"Checkbox"},{value:"radio",label:"Radio Group"}];switch(e){case"Int":case"Float":return[{value:"number",label:"Number Input"},{value:"range",label:"Range Slider"},...i];case"Boolean":return[{value:"checkbox",label:"Checkbox"},{value:"switch",label:"Switch"},{value:"radio",label:"Radio Group"}];case"DateTime":return[{value:"datetime-local",label:"Date & Time"},{value:"date",label:"Date Only"},{value:"time",label:"Time Only"},...i];case"Date":return[{value:"date",label:"Date Picker"},...i];case"Email":return[{value:"email",label:"Email Input"},...i];case"Phone":return[{value:"tel",label:"Phone Input"},...i];case"URL":return[{value:"url",label:"URL Input"},...i];case"Password":return[{value:"password",label:"Password Input"},...i];case"Enum":return[{value:"select",label:"Select Dropdown"},{value:"radio",label:"Radio Group"},{value:"checkbox",label:"Checkbox Group"},...i];default:return i}}function xe({configuration:e,onUpdate:i}){var d,j,b,u,g,w,k,c,G,r;const[x,t]=R.useState(!1);return a.jsxs(z,{gap:"xs",children:[a.jsxs(h,{justify:"space-between",children:[a.jsx(I,{size:"sm",fw:500,children:"Form Settings"}),a.jsx(B,{variant:"subtle",size:"xs",onClick:()=>t(!x),children:x?"Hide Advanced":"Show Advanced"})]}),a.jsx(q,{label:"Layout Style",value:(e==null?void 0:e.layout)||"single-column",onChange:n=>i({layout:n}),data:[{value:"single-column",label:"Single Column"},{value:"two-column",label:"Two Columns"},{value:"three-column",label:"Three Columns"},{value:"flexible",label:"Flexible Grid"}],size:"xs"}),a.jsx(q,{label:"Submit Action",value:((d=e==null?void 0:e.submission)==null?void 0:d.action)||"create",onChange:n=>i({submission:{...e==null?void 0:e.submission,action:n}}),data:[{value:"create",label:"Create New Record"},{value:"update",label:"Update Record"},{value:"upsert",label:"Create or Update"},{value:"custom",label:"Custom Action"}],size:"xs"}),a.jsxs(h,{children:[a.jsx(T,{label:"Client-side Validation",checked:((j=e==null?void 0:e.validation)==null?void 0:j.clientSide)??!0,onChange:n=>i({validation:{...e==null?void 0:e.validation,clientSide:n.target.checked}}),size:"xs"}),a.jsx(T,{label:"Server-side Validation",checked:((b=e==null?void 0:e.validation)==null?void 0:b.serverSide)??!0,onChange:n=>i({validation:{...e==null?void 0:e.validation,serverSide:n.target.checked}}),size:"xs"}),a.jsx(T,{label:"Real-time Validation",checked:((u=e==null?void 0:e.validation)==null?void 0:u.realTime)??!0,onChange:n=>i({validation:{...e==null?void 0:e.validation,realTime:n.target.checked}}),size:"xs"})]}),x&&a.jsxs(z,{gap:"xs",p:"xs",bg:"gray.0",children:[a.jsx(I,{size:"xs",fw:500,color:"dimmed",children:"Advanced Settings"}),a.jsxs(h,{children:[a.jsx(T,{label:"Auto-save Draft",checked:((g=e==null?void 0:e.autoSave)==null?void 0:g.enabled)??!1,onChange:n=>i({autoSave:{...e==null?void 0:e.autoSave,enabled:n.target.checked}}),size:"xs"}),a.jsx(T,{label:"Show Progress",checked:((w=e==null?void 0:e.progress)==null?void 0:w.enabled)??!1,onChange:n=>i({progress:{...e==null?void 0:e.progress,enabled:n.target.checked}}),size:"xs"})]}),((k=e==null?void 0:e.autoSave)==null?void 0:k.enabled)&&a.jsx(D,{label:"Auto-save Interval (seconds)",value:((c=e==null?void 0:e.autoSave)==null?void 0:c.interval)||30,onChange:n=>i({autoSave:{...e==null?void 0:e.autoSave,interval:n||30}}),min:5,max:300,size:"xs"}),a.jsx(E,{label:"Success Message",value:((G=e==null?void 0:e.messages)==null?void 0:G.success)||"",onChange:n=>i({messages:{...e==null?void 0:e.messages,success:n.target.value}}),placeholder:"Record saved successfully",size:"xs"}),a.jsx(E,{label:"Error Message",value:((r=e==null?void 0:e.messages)==null?void 0:r.error)||"",onChange:n=>i({messages:{...e==null?void 0:e.messages,error:n.target.value}}),placeholder:"Failed to save record",size:"xs"})]})]})}const ge=({component:e,onUpdate:i,onValidate:x,entities:t=[]})=>{const[d,j]=R.useState([]),[b,u]=R.useState(!1),g=R.useCallback((r,n)=>{i==null||i(r,n)},[i]),w=R.useCallback(r=>{e&&g(e.id,r)},[e,g]),k=R.useCallback(async()=>{if(!(!e||!x)){u(!0);try{const r=await x(e);j(r)}catch(r){console.error("Validation failed:",r)}finally{u(!1)}}},[e,x]);if(Y.useEffect(()=>{e&&k()},[e,k]),!e)return a.jsx(L,{withBorder:!0,radius:"md",h:"100%",p:"md",children:a.jsxs(z,{align:"center",justify:"center",h:"100%",children:[a.jsx(O,{size:48,color:"var(--mantine-color-gray-4)"}),a.jsx(I,{color:"dimmed",ta:"center",children:"Select a component to configure its properties"})]})});const c=d.some(r=>r.severity==="error"),G=d.some(r=>r.severity==="warning");return a.jsxs(L,{withBorder:!0,radius:"md",h:"100%",style:{display:"flex",flexDirection:"column"},children:[a.jsx(L.Section,{p:"md",withBorder:!0,children:a.jsx(h,{justify:"space-between",children:a.jsxs(z,{gap:4,children:[a.jsx(I,{size:"lg",fw:600,children:"Component Configuration"}),a.jsxs(h,{gap:"xs",children:[a.jsx(V,{variant:"light",children:e.type}),c&&a.jsx(V,{color:"red",variant:"light",children:"Errors"}),G&&a.jsx(V,{color:"yellow",variant:"light",children:"Warnings"})]})]})})}),a.jsx(ee,{flex:1,children:a.jsxs(z,{gap:"md",p:"md",children:[(c||G)&&a.jsx(ae,{icon:c?a.jsx(le,{size:16}):void 0,color:c?"red":"yellow",title:c?"Configuration Errors":"Configuration Warnings",children:a.jsx(z,{gap:"xs",children:d.map((r,n)=>a.jsxs(I,{size:"sm",children:[r.field,": ",r.message]},n))})}),a.jsxs(A,{defaultValue:"basic",children:[a.jsxs(A.List,{children:[a.jsx(A.Tab,{value:"basic",leftSection:a.jsx(O,{size:14}),children:"Basic"}),a.jsx(A.Tab,{value:"styling",leftSection:a.jsx(ie,{size:14}),children:"Styling"}),e.type==="DataGrid"&&a.jsx(A.Tab,{value:"datagrid",leftSection:a.jsx(_,{size:14}),children:"Data Grid"}),e.type==="TorqueForm"&&a.jsx(A.Tab,{value:"form",leftSection:a.jsx(_,{size:14}),children:"Form"})]}),a.jsx(A.Panel,{value:"basic",pt:"md",children:a.jsx(te,{component:e,onUpdate:w})}),a.jsx(A.Panel,{value:"styling",pt:"md",children:a.jsx(I,{size:"sm",color:"dimmed",children:"Advanced styling options coming soon..."})}),e.type==="DataGrid"&&a.jsx(A.Panel,{value:"datagrid",pt:"md",children:a.jsx(re,{component:e,onUpdate:w,entities:t})}),e.type==="TorqueForm"&&a.jsx(A.Panel,{value:"form",pt:"md",children:a.jsx(ue,{component:e,onUpdate:w,entities:t})})]})]})}),a.jsx(L.Section,{p:"md",withBorder:!0,children:a.jsxs(h,{justify:"space-between",children:[a.jsx(h,{gap:"xs",children:d.length===0&&a.jsxs(h,{gap:"xs",children:[a.jsx(se,{size:16,color:"var(--mantine-color-green-6)"}),a.jsx(I,{size:"sm",color:"green",children:"Valid configuration"})]})}),a.jsx(B,{size:"sm",variant:"light",loading:b,onClick:k,children:"Validate"})]})})]})};ge.__docgenInfo={description:"",methods:[],displayName:"ConfigurationPanel",props:{component:{required:!1,tsType:{name:"union",raw:"LayoutEditorComponent | null",elements:[{name:"LayoutEditorComponent"},{name:"null"}]},description:""},onUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(componentId: string, configuration: ComponentConfiguration) => void",signature:{arguments:[{type:{name:"string"},name:"componentId"},{type:{name:"ComponentConfiguration"},name:"configuration"}],return:{name:"void"}}},description:""},onValidate:{required:!1,tsType:{name:"signature",type:"function",raw:"(component: LayoutEditorComponent) => Promise<ValidationResult[]>",signature:{arguments:[{type:{name:"LayoutEditorComponent"},name:"component"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"ValidationResult"}],raw:"ValidationResult[]"}],raw:"Promise<ValidationResult[]>"}}},description:""},entities:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; name: string; displayName: string; fields: any[] }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"displayName",value:{name:"string",required:!0}},{key:"fields",value:{name:"Array",elements:[{name:"any"}],raw:"any[]",required:!0}}]}}],raw:"Array<{ id: string; name: string; displayName: string; fields: any[] }>"},description:"",defaultValue:{value:"[]",computed:!1}}}};export{ge as C};
